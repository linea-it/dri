var $jscomp={};$jscomp.scope={};$jscomp.defineProperty=typeof Object.defineProperties=='function'?Object.defineProperty:function(b,c,a){a=(a);if(a.get||a.set){throw new TypeError('ES3 does not support getters and setters.')}if(b==Array.prototype||b==Object.prototype){return}b[c]=a.value};$jscomp.getGlobal=function(a){return typeof window!='undefined'&&window===a?a:typeof global!='undefined'&&global!=null?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(i,f,j,k){if(!f){return}var a=$jscomp.global;var b=i.split('.');for(var e=0;e<b.length-1;e++){var d=b[e];if(!(d in a)){a[d]={}}a=a[d]}var g=b[b.length-1];var h=a[g];var c=f(h);if(c==h||c==null){return}$jscomp.defineProperty(a,g,{configurable:!0,writable:!0,value:c})};$jscomp.polyfill('Array.prototype.copyWithin',function(a){if(a){return a}var b=function(c,b,a){var d=this.length;c=Number(c);b=Number(b);a=Number(a!=null?a:d);if(c<b){a=Math.min(a,d);while(b<a){if(b in this){this[c++]=this[b++]}else {delete this[c++];b++}}}else {a=Math.min(a,d+b-c);c+=a-b;while(a>b){if(--a in this){this[--c]=this[a]}else {delete this[c]}}}return this};return b},'es6-impl','es3');$jscomp.SYMBOL_PREFIX='jscomp_symbol_';$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};if(!$jscomp.global.Symbol){$jscomp.global.Symbol=$jscomp.Symbol}};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return ($jscomp.SYMBOL_PREFIX+(a||'')+$jscomp.symbolCounter_++)};$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;if(!a){a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol('iterator')}if(typeof Array.prototype[a]!='function'){$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}})}$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){if(b<a.length){return {done:!1,value:a[b++]}}else {return {done:!0}}})};$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();var a={next:b};a[$jscomp.global.Symbol.iterator]=function(){return this};return (a)};$jscomp.array=$jscomp.array||{};$jscomp.iteratorFromArray=function(a,d){$jscomp.initSymbolIterator();if(a instanceof String){a=a+''}var c=0;var b={next:function(){if(c<a.length){var e=c++;return {value:d(e,a[e]),done:!1}}b.next=function(){return {done:!0,value:void 0}};return b.next()}};b[Symbol.iterator]=function(){return b};return b};$jscomp.polyfill('Array.prototype.entries',function(a){if(a){return a}var b=function(){return $jscomp.iteratorFromArray(this,function(a,b){return [a,b]})};return b},'es6-impl','es3');$jscomp.polyfill('Array.prototype.fill',function(a){if(a){return a}var b=function(e,b,a){var c=this.length||0;if(b<0){b=Math.max(0,c+(b))}if(a==null||a>c){a=c}a=Number(a);if(a<0){a=Math.max(0,c+a)}for(var d=Number(b||0);d<a;d++){this[d]=e}return this};return b},'es6-impl','es3');$jscomp.findInternal=function(a,d,e){if(a instanceof String){a=(String(a))}var f=a.length;for(var b=0;b<f;b++){var c=a[b];if(d.call(e,c,b,a)){return {i:b,v:c}}}return {i:-1,v:void 0}};$jscomp.polyfill('Array.prototype.find',function(a){if(a){return a}var b=function(b,a){return $jscomp.findInternal(this,b,a).v};return b},'es6-impl','es3');$jscomp.polyfill('Array.prototype.findIndex',function(a){if(a){return a}var b=function(b,a){return $jscomp.findInternal(this,b,a).i};return b},'es6-impl','es3');$jscomp.polyfill('Array.from',function(a){if(a){return a}var b=function(a,b,f){$jscomp.initSymbolIterator();b=b!=null?b:function(a){return a};var c=[];var e=(a)[Symbol.iterator];if(typeof e=='function'){a=e.call(a);var g;while(!(g=a.next()).done){c.push(b.call((f),g.value))}}else {var h=a.length;for(var d=0;d<h;d++){c.push(b.call((f),a[d]))}}return c};return b},'es6-impl','es3');$jscomp.polyfill('Array.prototype.keys',function(a){if(a){return a}var b=function(){return $jscomp.iteratorFromArray(this,function(a){return a})};return b},'es6-impl','es3');$jscomp.polyfill('Array.of',function(a){if(a){return a}var b=function(a){return Array.from(arguments)};return b},'es6-impl','es3');$jscomp.polyfill('Array.prototype.values',function(a){if(a){return a}var b=function(){return $jscomp.iteratorFromArray(this,function(b,a){return a})};return b},'es6','es3');$jscomp.executeAsyncGenerator=function(a){function passValueToGenerator(b){return a.next(b)}function passErrorToGenerator(b){return a['throw'](b)}return new Promise(function(b,c){function handleGeneratorRecord(a){if(a.done){b(a.value)}else {Promise.resolve(a.value).then(passValueToGenerator,passErrorToGenerator).then(handleGeneratorRecord,c)}}handleGeneratorRecord(a.next())})};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var b=(a)[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator((a))};$jscomp.owns=function(b,a){return Object.prototype.hasOwnProperty.call(b,a)};$jscomp.polyfill('WeakMap',function(c){function isConformant(){if(!c||!Object.seal){return !1}try{var b=Object.seal({});var d=Object.seal({});var a=new (c)([[b,2],[d,3]]);if(a.get(b)!=2||a.get(d)!=3){return !1}a['delete'](b);a.set(d,4);return !a.has(b)&&a.get(d)==4}catch(e){return !1}}if(isConformant()){return c}var a='$jscomp_hidden_'+Math.random().toString().substring(2);function insert(b){if(!$jscomp.owns(b,a)){var c={};$jscomp.defineProperty(b,a,{value:c})}}function patch(a){var b=Object[a];if(b){Object[a]=function(a){insert(a);return b(a)}}}patch('freeze');patch('preventExtensions');patch('seal');var d=0;var b=function(a){this.id_=(d+=Math.random()+1).toString();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();var e=$jscomp.makeIterator(a);var b;while(!(b=e.next()).done){var c=b.value;this.set((c[0]),(c[1]))}}};b.prototype.set=function(b,c){insert(b);if(!$jscomp.owns(b,a)){throw new Error('WeakMap key fail: '+b)}b[a][this.id_]=c;return this};b.prototype.get=function(b){return $jscomp.owns(b,a)?b[a][this.id_]:undefined};b.prototype.has=function(b){return $jscomp.owns(b,a)&&$jscomp.owns(b[a],this.id_)};b.prototype['delete']=function(b){if(!$jscomp.owns(b,a)||!$jscomp.owns(b[a],this.id_)){return !1}return delete b[a][this.id_]};return b},'es6-impl','es3');$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.polyfill('Map',function(b){var h=!$jscomp.ASSUME_NO_NATIVE_MAP&&function(){if(!b||!b.prototype.entries||typeof Object.seal!='function'){return !1}try{b=(b);var e=Object.seal({x:4});var c=new b($jscomp.makeIterator([[e,'s']]));if(c.get(e)!='s'||c.size!=1||c.get({x:4})||c.set({x:4},'t')!=c||c.size!=2){return !1}var d=c.entries();var a=d.next();if(a.done||a.value[0]!=e||a.value[1]!='s'){return !1}a=d.next();if(a.done||a.value[0].x!=4||a.value[1]!='t'||!d.next().done){return !1}return !0}catch(k){return !1}}();if(h){return b}$jscomp.initSymbol();$jscomp.initSymbolIterator();var f=new WeakMap();var c=function(){};c.prototype.previous;c.prototype.next;c.prototype.head;c.prototype.key;c.prototype.value;var a=function(a){this.data_={};this.head_=g();this.size=0;if(a){var d=$jscomp.makeIterator(a);var b;while(!(b=d.next()).done){var c=(b).value;this.set((c[0]),(c[1]))}}};a.prototype.set=function(c,b){var a=d(this,c);if(!a.list){a.list=this.data_[a.id]=[]}if(!a.entry){a.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:c,value:b};a.list.push(a.entry);this.head_.previous.next=a.entry;this.head_.previous=a.entry;this.size++}else {a.entry.value=b}return this};a.prototype['delete']=function(b){var a=d(this,b);if(a.entry&&a.list){a.list.splice(a.index,1);if(!a.list.length){delete this.data_[a.id]}a.entry.previous.next=a.entry.next;a.entry.next.previous=a.entry.previous;a.entry.head=null;this.size--;return !0}return !1};a.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=g();this.size=0};a.prototype.has=function(a){return !!d(this,a).entry};a.prototype.get=function(b){var a=d(this,b).entry;return (a&&(a.value))};a.prototype.entries=function(){return e(this,function(a){return [a.key,a.value]})};a.prototype.keys=function(){return e(this,function(a){return a.key})};a.prototype.values=function(){return e(this,function(a){return a.value})};a.prototype.forEach=function(d,c){var e=this.entries();var b;while(!(b=e.next()).done){var a=b.value;d.call((c),(a[1]),(a[0]),this)}};(a.prototype)[Symbol.iterator]=a.prototype.entries;var d=function(f,d){var e=j(d);var a=f.data_[e];if(a&&$jscomp.owns(f.data_,e)){for(var c=0;c<a.length;c++){var b=a[c];if(d!==d&&b.key!==b.key||d===b.key){return {id:e,list:a,index:c,entry:b}}}}return {id:e,list:a,index:-1,entry:undefined}};var e=function(b,c){var a=b.head_;return $jscomp.iteratorPrototype(function(){if(a){while(a.head!=b.head_){a=a.previous}while(a.next!=a.head){a=a.next;return {done:!1,value:c(a)}}a=null}return {done:!0,value:void 0}})};var g=function(){var a={};a.previous=a.next=a.head=a;return a};var i=0;var j=function(a){var b=a&&typeof a;if(b=='object'||b=='function'){a=(a);if(!f.has(a)){var c=''+ ++i;f.set(a,c);return c}return f.get(a)}return 'p_'+a};return a},'es6-impl','es3');$jscomp.polyfill('Math.acosh',function(a){if(a){return a}var b=function(a){a=Number(a);return Math.log(a+Math.sqrt(a*a-1))};return b},'es6-impl','es3');$jscomp.polyfill('Math.asinh',function(a){if(a){return a}var b=function(a){a=Number(a);if(a===0){return a}var b=Math.log(Math.abs(a)+Math.sqrt(a*a+1));return a<0?-b:b};return b},'es6-impl','es3');$jscomp.polyfill('Math.log1p',function(a){if(a){return a}var b=function(a){a=Number(a);if(a<0.25&&a>-0.25){var e=a;var f=1;var b=a;var c=0;var d=1;while(c!=b){e*=a;d*=-1;b=(c=b)+d*e/++f}return b}return Math.log(1+a)};return b},'es6-impl','es3');$jscomp.polyfill('Math.atanh',function(b){if(b){return b}var a=Math.log1p;var c=function(b){b=Number(b);return (a(b)-a(-b))/2};return c},'es6-impl','es3');$jscomp.polyfill('Math.cbrt',function(a){if(a){return a}var b=function(a){if(a===0){return a}a=Number(a);var b=Math.pow(Math.abs(a),1/3);return a<0?-b:b};return b},'es6-impl','es3');$jscomp.polyfill('Math.clz32',function(a){if(a){return a}var b=function(a){a=Number(a)>>>0;if(a===0){return 32}var b=0;if((a&4.29490176E9)===0){a<<=16;b+=16}if((a&4.27819008E9)===0){a<<=8;b+=8}if((a&4.02653184E9)===0){a<<=4;b+=4}if((a&3.221225472E9)===0){a<<=2;b+=2}if((a&2.147483648E9)===0){b++}return b};return b},'es6-impl','es3');$jscomp.polyfill('Math.cosh',function(a){if(a){return a}var b=Math.exp;var c=function(a){a=Number(a);return (b(a)+b(-a))/2};return c},'es6-impl','es3');$jscomp.polyfill('Math.expm1',function(a){if(a){return a}var b=function(a){a=Number(a);if(a<0.25&&a>-0.25){var d=a;var e=1;var b=a;var c=0;while(c!=b){d*=a/++e;b=(c=b)+d}return b}return Math.exp(a)-1};return b},'es6-impl','es3');$jscomp.polyfill('Math.hypot',function(a){if(a){return a}var b=function(b,c,g){b=Number(b);c=Number(c);var a,f,e;var d=Math.max(Math.abs(b),Math.abs(c));for(a=2;a<arguments.length;a++){d=Math.max(d,Math.abs(arguments[a]))}if(d>1.0E100||d<1.0E-100){b=b/d;c=c/d;e=b*b+c*c;for(a=2;a<arguments.length;a++){f=Number(arguments[a])/d;e+=f*f}return Math.sqrt(e)*d}else {e=b*b+c*c;for(a=2;a<arguments.length;a++){f=Number(arguments[a]);e+=f*f}return Math.sqrt(e)}};return b},'es6-impl','es3');$jscomp.polyfill('Math.imul',function(a){if(a){return a}var b=function(a,b){a=Number(a);b=Number(b);var e=a>>>16&65535;var c=a&65535;var f=b>>>16&65535;var d=b&65535;var g=e*d+c*f<<16>>>0;return c*d+g|0};return b},'es6-impl','es3');$jscomp.polyfill('Math.log10',function(a){if(a){return a}var b=function(a){return Math.log(a)/Math.LN10};return b},'es6-impl','es3');$jscomp.polyfill('Math.log2',function(a){if(a){return a}var b=function(a){return Math.log(a)/Math.LN2};return b},'es6-impl','es3');$jscomp.polyfill('Math.sign',function(a){if(a){return a}var b=function(a){a=Number(a);return a===0||isNaN(a)?a:a>0?1:-1};return b},'es6-impl','es3');$jscomp.polyfill('Math.sinh',function(a){if(a){return a}var b=Math.exp;var c=function(a){a=Number(a);if(a===0){return a}return (b(a)-b(-a))/2};return c},'es6-impl','es3');$jscomp.polyfill('Math.tanh',function(a){if(a){return a}var b=function(a){a=Number(a);if(a===0){return a}var b=Math.exp(-2*Math.abs(a));var c=(1-b)/(1+b);return a<0?-c:c};return b},'es6-impl','es3');$jscomp.polyfill('Math.trunc',function(a){if(a){return a}var b=function(a){a=Number(a);if(isNaN(a)||a===Infinity||a===-Infinity||a===0){return a}var b=Math.floor(Math.abs(a));return a<0?-b:b};return b},'es6-impl','es3');$jscomp.polyfill('Number.EPSILON',function(a){return Math.pow(2,-52)},'es6-impl','es3');$jscomp.polyfill('Number.MAX_SAFE_INTEGER',function(){return 9.007199254740991E15},'es6-impl','es3');$jscomp.polyfill('Number.MIN_SAFE_INTEGER',function(){return -9.007199254740991E15},'es6-impl','es3');$jscomp.polyfill('Number.isFinite',function(a){if(a){return a}var b=function(a){if(typeof a!=='number'){return !1}return !isNaN(a)&&a!==Infinity&&a!==-Infinity};return b},'es6-impl','es3');$jscomp.polyfill('Number.isInteger',function(a){if(a){return a}var b=function(a){if(!Number.isFinite(a)){return !1}return a===Math.floor(a)};return b},'es6-impl','es3');$jscomp.polyfill('Number.isNaN',function(a){if(a){return a}var b=function(a){return typeof a==='number'&&isNaN(a)};return b},'es6-impl','es3');$jscomp.polyfill('Number.isSafeInteger',function(a){if(a){return a}var b=function(a){return Number.isInteger(a)&&Math.abs(a)<=Number.MAX_SAFE_INTEGER};return b},'es6-impl','es3');$jscomp.polyfill('Object.assign',function(a){if(a){return a}var b=function(d,e){for(var c=1;c<arguments.length;c++){var a=arguments[c];if(!a){continue}for(var b in a){if($jscomp.owns(a,b)){d[b]=a[b]}}}return d};return b},'es6-impl','es3');$jscomp.polyfill('Object.getOwnPropertySymbols',function(a){if(a){return a}return function(){return []}},'es6-impl','es5');$jscomp.polyfill('Object.is',function(a){if(a){return a}var b=function(a,b){if(a===b){return a!==0||1/a===1/(b)}else {return a!==a&&b!==b}};return b},'es6-impl','es3');$jscomp.polyfill('Object.setPrototypeOf',function(a){if(a){return a}if(typeof ''.__proto__!='object'){return null}var b=function(a,b){a.__proto__=b;if(a.__proto__!==b){throw new TypeError(a+' is not extensible')}return a};return b},'es6','es5');$jscomp.EXPOSE_ASYNC_EXECUTOR=!0;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.polyfill('Promise',function(c){if(c&&!$jscomp.FORCE_POLYFILL_PROMISE){return c}function AsyncExecutor(){this.batch_=null}AsyncExecutor.prototype.asyncExecute=function(a){if(this.batch_==null){this.batch_=[];this.asyncExecuteBatch_()}this.batch_.push(a);return this};AsyncExecutor.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var e=$jscomp.global['setTimeout'];AsyncExecutor.prototype.asyncExecuteFunction=function(a){e(a,0)};AsyncExecutor.prototype.executeBatch_=function(){while(this.batch_&&this.batch_.length){var b=this.batch_;this.batch_=[];for(var a=0;a<b.length;++a){var c=b[a];delete b[a];try{c()}catch(f){this.asyncThrow_(f)}}}this.batch_=null};AsyncExecutor.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a})};var b={PENDING:0,FULFILLED:1,REJECTED:2};var a=function(c){this.state_=b.PENDING;this.result_=undefined;this.onSettledCallbacks_=[];var a=this.createResolveAndReject_();try{c(a.resolve,a.reject)}catch(f){a.reject(f)}};a.prototype.createResolveAndReject_=function(){var b=this;var a=!1;function firstCallWins(c){return function(d){if(!a){a=!0;c.call(b,d)}}}return {resolve:firstCallWins(this.resolveTo_),reject:firstCallWins(this.reject_)}};a.prototype.resolveTo_=function(b){if(b===this){this.reject_(new TypeError('A Promise cannot resolve to itself'))}else {if(b instanceof a){this.settleSameAsPromise_((b))}else {if(isObject(b)){this.resolveToNonPromiseObj_((b))}else {this.fulfill_(b)}}}};a.prototype.resolveToNonPromiseObj_=function(b){var a=undefined;try{a=b.then}catch(f){this.reject_(f);return}if(typeof a=='function'){this.settleSameAsThenable_(a,(b))}else {this.fulfill_(b)}};function isObject(a){switch(typeof a){case 'object':return a!=null;case 'function':return !0;default:return !1;}}a.prototype.reject_=function(a){this.settle_(b.REJECTED,a)};a.prototype.fulfill_=function(a){this.settle_(b.FULFILLED,a)};a.prototype.settle_=function(c,a){if(this.state_!=b.PENDING){throw new Error('Cannot settle('+c+', '+a|'): Promise already settled in state'+this.state_)}this.state_=c;this.result_=a;this.executeOnSettledCallbacks_()};a.prototype.executeOnSettledCallbacks_=function(){if(this.onSettledCallbacks_!=null){var b=this.onSettledCallbacks_;for(var a=0;a<b.length;++a){(b[a]).call();b[a]=null}this.onSettledCallbacks_=null}};var d=new AsyncExecutor();a.prototype.settleSameAsPromise_=function(b){var a=this.createResolveAndReject_();b.callWhenSettled_(a.resolve,a.reject)};a.prototype.settleSameAsThenable_=function(b,c){var a=this.createResolveAndReject_();try{b.call(c,a.resolve,a.reject)}catch(f){a.reject(f)}};a.prototype.then=function(e,f){var b;var c;var d=new a(function(a,d){b=a;c=d});function createCallback(a,d){if(typeof a=='function'){return function(d){try{b(a(d))}catch(g){c(g)}}}else {return d}}this.callWhenSettled_(createCallback(e,b),createCallback(f,c));return d};a.prototype['catch']=function(a){return this.then(undefined,a)};a.prototype.callWhenSettled_=function(c,e){var a=this;function callback(){switch(a.state_){case b.FULFILLED:c(a.result_);break;case b.REJECTED:e(a.result_);break;default:throw new Error('Unexpected state: '+a.state_);}}if(this.onSettledCallbacks_==null){d.asyncExecute(callback)}else {this.onSettledCallbacks_.push(function(){d.asyncExecute(callback)})}};a.resolve=function(b){if(b instanceof a){return b}else {return new a(function(a,c){a(b)})}};a.reject=function(b){return new a(function(c,a){a(b)})};a.race=function(b){return new a(function(e,f){var d=$jscomp.makeIterator(b);for(var c=d.next();!c.done;c=d.next()){a.resolve(c.value).callWhenSettled_(e,f)}})};a.all=function(d){var c=$jscomp.makeIterator(d);var b=c.next();if(b.done){return a.resolve([])}else {return new a(function(f,g){var d=[];var e=0;function onFulfilled(a){return function(b){d[a]=b;e--;if(e==0){f(d)}}}do{d.push(undefined);e++;a.resolve(b.value).callWhenSettled_(onFulfilled(d.length-1),g);b=c.next()}while(!b.done)})}};if($jscomp.EXPOSE_ASYNC_EXECUTOR){a['$jscomp$new$AsyncExecutor']=function(){return new AsyncExecutor()}}return a},'es6-impl','es3');$jscomp.polyfill('Reflect.apply',function(a){if(a){return a}var c=Function.prototype.apply;var b=function(d,b,a){return c.call(d,b,a)};return b},'es6','es3');$jscomp.polyfill('Reflect.construct',function(a){if(a){return a}var b=function(b,d,a){if(a===undefined){a=b}var e=a.prototype||Object.prototype;var c=Object.create(e);var f=Reflect.apply(b,c,d);return f||c};return b},'es6','es5');$jscomp.polyfill('Reflect.defineProperty',function(a){if(a){return a}var b=function(d,c,b){try{Object.defineProperty(d,c,b);var a=Object.getOwnPropertyDescriptor(d,c);if(!a){return !1}return a.configurable===(b.configurable||!1)&&a.enumerable===(b.enumerable||!1)&&('value' in a?a.value===b.value&&a.writable===(b.writable||!1):a.get===b.get&&a.set===b.set)}catch(e){return !1}};return b},'es6','es5');$jscomp.polyfill('Reflect.deleteProperty',function(a){if(a){return a}var b=function(b,a){if(!$jscomp.owns(b,a)){return !0}try{return delete b[a]}catch(c){return !1}};return b},'es6','es3');$jscomp.polyfill('Reflect.getOwnPropertyDescriptor',function(a){return a||Object.getOwnPropertyDescriptor},'es6','es5');$jscomp.polyfill('Reflect.getPrototypeOf',function(a){return a||Object.getPrototypeOf},'es6','es5');$jscomp.findDescriptor=function(d,c){var a=d;while(a){var b=Reflect.getOwnPropertyDescriptor(a,c);if(b){return b}a=Reflect.getPrototypeOf(a)}return undefined};$jscomp.polyfill('Reflect.get',function(a){if(a){return a}var b=function(c,b,d){if(arguments.length<=2){return c[b]}var a=$jscomp.findDescriptor(c,b);if(a){return a.get?a.get.call(d):a.value}return undefined};return b},'es6','es5');$jscomp.polyfill('Reflect.has',function(a){if(a){return a}var b=function(b,a){return a in b};return b},'es6','es3');$jscomp.polyfill('Reflect.isExtensible',function(a){if(a){return a}if(typeof Object.isExtensible=='function'){return Object.isExtensible}return function(){return !0}},'es6','es3');$jscomp.polyfill('Reflect.ownKeys',function(b){if(b){return b}var a='jscomp_symbol_';function isSymbol(b){return b.substring(0,a.length)==a}var c=function(d){var e=[];var b=Object.getOwnPropertyNames(d);var c=Object.getOwnPropertySymbols(d);for(var a=0;a<b.length;a++){(isSymbol(b[a])?c:e).push(b[a])}return e.concat(c)};return c},'es6','es5');$jscomp.polyfill('Reflect.preventExtensions',function(a){if(a){return a}if(typeof Object.preventExtensions!='function'){return function(){return !1}}var b=function(a){Object.preventExtensions(a);return !Object.isExtensible(a)};return b},'es6','es3');$jscomp.polyfill('Reflect.set',function(a){if(a){return a}var b=function(a,c,d,e){var b=$jscomp.findDescriptor(a,c);if(!b){if(Reflect.isExtensible(a)){a[c]=d;return !0}return !1}if(b.set){b.set.call(arguments.length>3?e:a,d);return !0}else {if(b.writable&&!Object.isFrozen(a)){a[c]=d;return !0}}return !1};return b},'es6','es5');$jscomp.polyfill('Reflect.setPrototypeOf',function(a){if(a){return a}if(typeof ''.__proto__!='object'){return null}var b=function(a,b){try{a.__proto__=b;return a.__proto__===b}catch(c){return !1}};return b},'es6','es5');$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.polyfill('Set',function(b){var c=!$jscomp.ASSUME_NO_NATIVE_SET&&function(){if(!b||!b.prototype.entries||typeof Object.seal!='function'){return !1}try{b=(b);var d=Object.seal({x:4});var c=new b($jscomp.makeIterator([d]));if(!c.has(d)||c.size!=1||c.add(d)!=c||c.size!=1||c.add({x:4})!=c||c.size!=2){return !1}var e=c.entries();var a=e.next();if(a.done||a.value[0]!=d||a.value[1]!=d){return !1}a=e.next();if(a.done||a.value[0]==d||a.value[0].x!=4||a.value[1]!=a.value[0]){return !1}return e.next().done}catch(f){return !1}}();if(c){return b}$jscomp.initSymbol();$jscomp.initSymbolIterator();var a=function(a){this.map_=new Map();if(a){var d=$jscomp.makeIterator(a);var b;while(!(b=d.next()).done){var c=(b).value;this.add(c)}}this.size=this.map_.size};a.prototype.add=function(a){this.map_.set(a,a);this.size=this.map_.size;return this};a.prototype['delete']=function(b){var a=this.map_['delete'](b);this.size=this.map_.size;return a};a.prototype.clear=function(){this.map_.clear();this.size=0};a.prototype.has=function(a){return this.map_.has(a)};a.prototype.entries=function(){return this.map_.entries()};a.prototype.values=function(){return this.map_.values()};(a.prototype)[Symbol.iterator]=a.prototype.values;a.prototype.forEach=function(b,a){var c=this;this.map_.forEach(function(d){return b.call((a),d,d,c)})};return a},'es6-impl','es3');$jscomp.checkStringArgs=function(a,c,b){if(a==null){throw new TypeError("The 'this' value for String.prototype."+b+' must not be null or undefined')}if(c instanceof RegExp){throw new TypeError('First argument to String.prototype.'+b+' must not be a regular expression')}return a+''};$jscomp.polyfill('String.prototype.codePointAt',function(a){if(a){return a}var b=function(a){var d=$jscomp.checkStringArgs(this,null,'codePointAt');var e=d.length;a=Number(a)||0;if(!(a>=0&&a<e)){return void 0}a=a|0;var b=d.charCodeAt(a);if(b<55296||b>56319||a+1===e){return b}var c=d.charCodeAt(a+1);if(c<56320||c>57343){return b}return (b-55296)*1024+c+9216};return b},'es6-impl','es3');$jscomp.polyfill('String.prototype.endsWith',function(a){if(a){return a}var b=function(a,b){var c=$jscomp.checkStringArgs(this,a,'endsWith');a=a+'';if(b===void 0){b=c.length}var e=Math.max(0,Math.min(b|0,c.length));var d=a.length;while(d>0&&e>0){if(c[--e]!=a[--d]){return !1}}return d<=0};return b},'es6-impl','es3');$jscomp.polyfill('String.fromCodePoint',function(a){if(a){return a}var b=function(d){var b='';for(var c=0;c<arguments.length;c++){var a=Number(arguments[c]);if(a<0||a>1114111||a!==Math.floor(a)){throw new RangeError('invalid_code_point '+a)}if(a<=65535){b+=String.fromCharCode(a)}else {a-=65536;b+=String.fromCharCode(a>>>10&1023|55296);b+=String.fromCharCode(a&1023|56320)}}return b};return b},'es6-impl','es3');$jscomp.polyfill('String.prototype.includes',function(a){if(a){return a}var b=function(a,b){var c=$jscomp.checkStringArgs(this,a,'includes');return c.indexOf(a,b||0)!==-1};return b},'es6-impl','es3');$jscomp.polyfill('String.prototype.repeat',function(a){if(a){return a}var b=function(a){var b=$jscomp.checkStringArgs(this,null,'repeat');if(a<0||a>1342177279){throw new RangeError('Invalid count value')}a=a|0;var c='';while(a){if(a&1){c+=b}if(a>>>=1){b+=b}}return c};return b},'es6-impl','es3');$jscomp.polyfill('String.prototype.startsWith',function(a){if(a){return a}var b=function(a,f){var b=$jscomp.checkStringArgs(this,a,'startsWith');a=a+'';var g=b.length;var d=a.length;var e=Math.max(0,Math.min((f)|0,b.length));var c=0;while(c<d&&e<g){if(b[e++]!=a[c++]){return !1}}return c>=d};return b},'es6-impl','es3');$jscomp.arrayFromIterator=function(c){var b;var a=[];while(!(b=c.next()).done){a.push(b.value)}return a};$jscomp.arrayFromIterable=function(a){if(a instanceof Array){return a}else {return $jscomp.arrayFromIterator($jscomp.makeIterator(a))}};$jscomp.inherits=function(a,b){function tempCtor(){}tempCtor.prototype=b.prototype;a.prototype=new tempCtor();a.prototype.constructor=a;for(var c in b){if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);if(d){Object.defineProperty(a,c,d)}}else {a[c]=b[c]}}};$jscomp.polyfill('WeakSet',function(b){function isConformant(){if(!b||!Object.seal){return !1}try{var c=Object.seal({});var d=Object.seal({});var a=new (b)([c]);if(!a.has(c)||a.has(d)){return !1}a['delete'](c);a.add(d);return !a.has(c)&&a.has(d)}catch(e){return !1}}if(isConformant()){return b}var a=function(a){this.map_=new WeakMap();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();var d=$jscomp.makeIterator(a);var b;while(!(b=d.next()).done){var c=b.value;this.add(c)}}};a.prototype.add=function(a){this.map_.set(a,!0);return this};a.prototype.has=function(a){return this.map_.has(a)};a.prototype['delete']=function(a){return this.map_['delete'](a)};return a},'es6-impl','es3');try{if(Array.prototype.values.toString().indexOf('[native code]')==-1){delete Array.prototype.values}}catch(a){}!function(d,b,c){function n(){var b=d.L;a.noConflict=function(){return d.L=b,this},d.L=a}var a={version:'1.0.0-rc.1+b2d7cf1'};'object'==typeof module&&'object'==typeof module.exports?module.exports=a:'function'==typeof define&&define.amd&&define(a),'undefined'!=typeof d&&n(),a.Util={extend:function(e){var b,a,d,c;for(a=1,d=arguments.length;a<d;a++){c=arguments[a];for(b in c){e[b]=c[b]}}return e},create:Object.create||function(){function d(){}return function(a){return d.prototype=a,new d()}}(),bind:function(a,d){var b=Array.prototype.slice;if(a.bind){return a.bind.apply(a,b.call(arguments,1))}var c=b.call(arguments,2);return function(){return a.apply(d,c.length?c.concat(b.call(arguments)):arguments)}},stamp:function(b){return b._leaflet_id=b._leaflet_id||++a.Util.lastId,b._leaflet_id},lastId:0,throttle:function(g,f,c){var b,a,e,d;return d=function(){b=!1,a&&(e.apply(c,a),a=!1)},e=function(){b?a=arguments:(g.apply(c,arguments),setTimeout(d,f),b=!0)}},wrapNum:function(c,d,f){var e=d[1],a=d[0],b=e-a;return c===e&&f?c:((c-a)%b+b)%b+a},falseFn:function(){return !1},formatNum:function(c,b){var a=Math.pow(10,b||5);return Math.round(c*a)/a},trim:function(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,'')},splitWords:function(b){return a.Util.trim(b).split(/\s+/)},setOptions:function(b,c){b.hasOwnProperty('options')||(b.options=b.options?a.Util.create(b.options):{});for(var d in c){b.options[d]=c[d]}return b.options},getParamString:function(d,b,e){var c=[];for(var a in d){c.push(encodeURIComponent(e?a.toUpperCase():a)+'='+encodeURIComponent(d[a]))}return (b&&b.indexOf('?')!==-1?'&':'?')+c.join('&')},template:function(d,b){return d.replace(a.Util.templateRe,function(e,d){var a=b[d];if(a===c){throw new Error('No value provided for variable '+e)}return 'function'==typeof a&&(a=a(b)),a})},templateRe:/\{ *([\w_\-]+) *\}/g,isArray:Array.isArray||function(a){return '[object Array]'===Object.prototype.toString.call(a)},indexOf:function(b,c){for(var a=0;a<b.length;a++){if(b[a]===c){return a}}return -1},emptyImageUrl:'data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs='},function(){function b(a){return d['webkit'+a]||d['moz'+a]||d['ms'+a]}function c(c){var a=+new Date(),b=Math.max(0,16-(a-e));return e=a+b,d.setTimeout(c,b)}var e=0,f=d.requestAnimationFrame||b('RequestAnimationFrame')||c,g=d.cancelAnimationFrame||b('CancelAnimationFrame')||b('CancelRequestAnimationFrame')||function(a){d.clearTimeout(a)};a.Util.requestAnimFrame=function(b,e,g){return g&&f===c?void b.call(e):f.call(d,a.bind(b,e))},a.Util.cancelAnimFrame=function(a){a&&g.call(d,a)}}(),a.extend=a.Util.extend,a.bind=a.Util.bind,a.stamp=a.Util.stamp,a.setOptions=a.Util.setOptions,a.Class=function(){},a.Class.extend=function(c){var d=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},f=d.__super__=this.prototype,b=a.Util.create(f);b.constructor=d,d.prototype=b;for(var e in this){this.hasOwnProperty(e)&&'prototype'!==e&&(d[e]=this[e])}return c.statics&&(a.extend(d,c.statics),delete c.statics),c.includes&&(a.Util.extend.apply(null,[b].concat(c.includes)),delete c.includes),b.options&&(c.options=a.Util.extend(a.Util.create(b.options),c.options)),a.extend(b,c),b._initHooks=[],b.callInitHooks=function(){if(!this._initHooksCalled){f.callInitHooks&&f.callInitHooks.call(this),this._initHooksCalled=!0;for(var a=0,c=b._initHooks.length;a<c;a++){b._initHooks[a].call(this)}}},d},a.Class.include=function(b){return a.extend(this.prototype,b),this},a.Class.mergeOptions=function(b){return a.extend(this.prototype.options,b),this},a.Class.addInitHook=function(a){var b=Array.prototype.slice.call(arguments,1),c='function'==typeof a?a:function(){this[a].apply(this,b)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c),this},a.Evented=a.Class.extend({on:function(b,d,f){if('object'==typeof b){for(var e in b){this._on(e,b[e],d)}}else {b=a.Util.splitWords(b);for(var c=0,g=b.length;c<g;c++){this._on(b[c],d,f)}}return this},off:function(b,d,f){if(b){if('object'==typeof b){for(var e in b){this._off(e,b[e],d)}}else {b=a.Util.splitWords(b);for(var c=0,g=b.length;c<g;c++){this._off(b[c],d,f)}}}else {delete this._events}return this},_on:function(c,e,d){var b=this._events=this._events||{},j=d&&d!==this&&a.stamp(d);if(j){var i=c+'_idx',f=c+'_len',g=b[i]=b[i]||{},h=a.stamp(e)+'_'+j;g[h]||(g[h]={fn:e,ctx:d},b[f]=(b[f]||0)+1)}else {b[c]=b[c]||[],b[c].push({fn:e})}},_off:function(e,i,j){var h,b,c,f,d=this._events,k=e+'_idx',m=e+'_len';if(d){if(!i){b=d[k];for(c in b){b[c].fn=a.Util.falseFn}for(b=d[e]||[],c=0,f=b.length;c<f;c++){b[c].fn=a.Util.falseFn}return delete d[e],delete d[k],void delete d[m]}var g,l=j&&j!==this&&a.stamp(j);if(l){g=a.stamp(i)+'_'+l,b=d[k],b&&b[g]&&(h=b[g],delete b[g],d[m]--)}else {if(b=d[e]){for(c=0,f=b.length;c<f;c++){if(b[c].fn===i){h=b[c],b.splice(c,1);break}}}}h&&(h.fn=a.Util.falseFn)}},fire:function(b,k,j){if(!this.listens(b,j)){return this}var g=a.Util.extend({},k,{type:b,target:this}),d=this._events;if(d){var c,i,e,f,h=d[b+'_idx'];if(d[b]){for(e=d[b].slice(),c=0,i=e.length;c<i;c++){e[c].fn.call(this,g)}}for(f in h){h[f].fn.call(h[f].ctx,g)}}return j&&this._propagateEvent(g),this},listens:function(b,c){var a=this._events;if(a&&(a[b]||a[b+'_len'])){return !0}if(c){for(var d in this._eventParents){if(this._eventParents[d].listens(b,c)){return !0}}}return !1},once:function(b,d,c){if('object'==typeof b){for(var e in b){this.once(e,b[e],d)}return this}var f=a.bind(function(){this.off(b,d,c).off(b,f,c)},this);return this.on(b,d,c).on(b,f,c)},addEventParent:function(b){return this._eventParents=this._eventParents||{},this._eventParents[a.stamp(b)]=b,this},removeEventParent:function(b){return this._eventParents&&delete this._eventParents[a.stamp(b)],this},_propagateEvent:function(b){for(var c in this._eventParents){this._eventParents[c].fire(b.type,a.extend({layer:b.target},b),!0)}}});var e=a.Evented.prototype;e.addEventListener=e.on,e.removeEventListener=e.clearAllEventListeners=e.off,e.addOneTimeEventListener=e.once,e.fireEvent=e.fire,e.hasEventListeners=e.listens,a.Mixin={Events:e},function(){var c=navigator.userAgent.toLowerCase(),h=b.documentElement,f='ActiveXObject' in d,i=c.indexOf('webkit')!==-1,r=c.indexOf('phantom')!==-1,l=c.search('android [23]')!==-1,m=c.indexOf('chrome')!==-1,p=c.indexOf('gecko')!==-1&&!i&&!d.opera&&!f,s=0===navigator.platform.indexOf('Win'),e='undefined'!=typeof orientation||c.indexOf('mobile')!==-1,j=!d.PointerEvent&&d.MSPointerEvent,n=d.PointerEvent||j,o=f&&'transition' in h.style,g='WebKitCSSMatrix' in d&&'m11' in new d.WebKitCSSMatrix()&&!l,k='MozPerspective' in h.style,q='OTransition' in h.style,t=!d.L_NO_TOUCH&&(n||'ontouchstart' in d||d.DocumentTouch&&b instanceof d.DocumentTouch);a.Browser={ie:f,ielt9:f&&!b.addEventListener,edge:'msLaunchUri' in navigator&&!('documentMode' in b),webkit:i,gecko:p,android:c.indexOf('android')!==-1,android23:l,chrome:m,safari:!m&&c.indexOf('safari')!==-1,win:s,ie3d:o,webkit3d:g,gecko3d:k,opera12:q,any3d:!d.L_DISABLE_3D&&(o||g||k)&&!q&&!r,mobile:e,mobileWebkit:e&&i,mobileWebkit3d:e&&g,mobileOpera:e&&d.opera,mobileGecko:e&&p,touch:!!t,msPointer:!!j,pointer:!!n,retina:(d.devicePixelRatio||d.screen.deviceXDPI/d.screen.logicalXDPI)>1}}(),a.Point=function(c,a,b){this.x=b?Math.round(c):c,this.y=b?Math.round(a):a},a.Point.prototype={clone:function(){return new a.Point(this.x,this.y)},add:function(b){return this.clone()._add(a.point(b))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(b){return this.clone()._subtract(a.point(b))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(b){return new a.Point(this.x*b.x,this.y*b.y)},unscaleBy:function(b){return new a.Point(this.x/b.x,this.y/b.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},distanceTo:function(b){b=a.point(b);var c=b.x-this.x,d=b.y-this.y;return Math.sqrt(c*c+d*d)},equals:function(b){return b=a.point(b),b.x===this.x&&b.y===this.y},contains:function(b){return b=a.point(b),Math.abs(b.x)<=Math.abs(this.x)&&Math.abs(b.y)<=Math.abs(this.y)},toString:function(){return 'Point('+a.Util.formatNum(this.x)+', '+a.Util.formatNum(this.y)+')'}},a.point=function(b,d,e){return b instanceof a.Point?b:a.Util.isArray(b)?new a.Point(b[0],b[1]):b===c||null===b?b:'object'==typeof b&&'x' in b&&'y' in b?new a.Point(b.x,b.y):new a.Point(b,d,e)},a.Bounds=function(b,c){if(b){for(var d=c?[b,c]:b,a=0,e=d.length;a<e;a++){this.extend(d[a])}}},a.Bounds.prototype={extend:function(b){return b=a.point(b),this.min||this.max?(this.min.x=Math.min(b.x,this.min.x),this.max.x=Math.max(b.x,this.max.x),this.min.y=Math.min(b.y,this.min.y),this.max.y=Math.max(b.y,this.max.y)):(this.min=b.clone(),this.max=b.clone()),this},getCenter:function(b){return new a.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,b)},getBottomLeft:function(){return new a.Point(this.min.x,this.max.y)},getTopRight:function(){return new a.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(b){var c,d;return b='number'==typeof b[0]||b instanceof a.Point?a.point(b):a.bounds(b),b instanceof a.Bounds?(c=b.min,d=b.max):c=d=b,c.x>=this.min.x&&d.x<=this.max.x&&c.y>=this.min.y&&d.y<=this.max.y},intersects:function(b){b=a.bounds(b);var c=this.min,d=this.max,e=b.min,f=b.max,h=f.x>=c.x&&e.x<=d.x,g=f.y>=c.y&&e.y<=d.y;return h&&g},overlaps:function(b){b=a.bounds(b);var c=this.min,d=this.max,e=b.min,f=b.max,h=f.x>c.x&&e.x<d.x,g=f.y>c.y&&e.y<d.y;return h&&g},isValid:function(){return !(!this.min||!this.max)}},a.bounds=function(b,c){return !b||b instanceof a.Bounds?b:new a.Bounds(b,c)},a.Transformation=function(d,a,b,c){this._a=d,this._b=a,this._c=b,this._d=c},a.Transformation.prototype={transform:function(b,a){return this._transform(b.clone(),a)},_transform:function(a,b){return b=b||1,a.x=b*(this._a*a.x+this._b),a.y=b*(this._c*a.y+this._d),a},untransform:function(c,b){return b=b||1,new a.Point((c.x/b-this._b)/this._a,(c.y/b-this._d)/this._c)}},a.DomUtil={get:function(a){return 'string'==typeof a?b.getElementById(a):a},getStyle:function(c,d){var a=c.style[d]||c.currentStyle&&c.currentStyle[d];if((!a||'auto'===a)&&b.defaultView){var e=b.defaultView.getComputedStyle(c,null);a=e?e[d]:null}return 'auto'===a?null:a},create:function(e,d,c){var a=b.createElement(e);return a.className=d||'',c&&c.appendChild(a),a},remove:function(b){var a=b.parentNode;a&&a.removeChild(b)},empty:function(a){for(;a.firstChild;){a.removeChild(a.firstChild)}},toFront:function(a){a.parentNode.appendChild(a)},toBack:function(b){var a=b.parentNode;a.insertBefore(b,a.firstChild)},hasClass:function(b,d){if(b.classList!==c){return b.classList.contains(d)}var e=a.DomUtil.getClass(b);return e.length>0&&(new RegExp('(^|\\s)'+d+'(\\s|$)')).test(e)},addClass:function(b,d){if(b.classList!==c){for(var g=a.Util.splitWords(d),e=0,h=g.length;e<h;e++){b.classList.add(g[e])}}else {if(!a.DomUtil.hasClass(b,d)){var f=a.DomUtil.getClass(b);a.DomUtil.setClass(b,(f?f+' ':'')+d)}}},removeClass:function(b,d){b.classList!==c?b.classList.remove(d):a.DomUtil.setClass(b,a.Util.trim((' '+a.DomUtil.getClass(b)+' ').replace(' '+d+' ',' ')))},setClass:function(a,b){a.className.baseVal===c?a.className=b:a.className.baseVal=b},getClass:function(a){return a.className.baseVal===c?a.className:a.className.baseVal},setOpacity:function(b,c){'opacity' in b.style?b.style.opacity=c:'filter' in b.style&&a.DomUtil._setOpacityIE(b,c)},_setOpacityIE:function(d,a){var b=!1,c='DXImageTransform.Microsoft.Alpha';try{b=d.filters.item(c)}catch(i){if(1===a){return}}a=Math.round(100*a),b?(b.Enabled=100!==a,b.Opacity=a):d.style.filter+=' progid:'+c+'(opacity='+a+')'},testProp:function(c){for(var d=b.documentElement.style,a=0;a<c.length;a++){if(c[a] in d){return c[a]}}return !1},setTransform:function(e,d,c){var b=d||new a.Point(0,0);e.style[a.DomUtil.TRANSFORM]=(a.Browser.ie3d?'translate('+b.x+'px,'+b.y+'px)':'translate3d('+b.x+'px,'+b.y+'px,0)')+(c?' scale('+c+')':'')},setPosition:function(c,b){c._leaflet_pos=b,a.Browser.any3d?a.DomUtil.setTransform(c,b):(c.style.left=b.x+'px',c.style.top=b.y+'px')},getPosition:function(b){return b._leaflet_pos||new a.Point(0,0)}},function(){a.DomUtil.TRANSFORM=a.DomUtil.testProp(['transform','WebkitTransform','OTransform','MozTransform','msTransform']);var e=a.DomUtil.TRANSITION=a.DomUtil.testProp(['webkitTransition','transition','OTransition','MozTransition','msTransition']);if(a.DomUtil.TRANSITION_END='webkitTransition'===e||'OTransition'===e?e+'End':'transitionend','onselectstart' in b){a.DomUtil.disableTextSelection=function(){a.DomEvent.on(d,'selectstart',a.DomEvent.preventDefault)},a.DomUtil.enableTextSelection=function(){a.DomEvent.off(d,'selectstart',a.DomEvent.preventDefault)}}else {var c=a.DomUtil.testProp(['userSelect','WebkitUserSelect','OUserSelect','MozUserSelect','msUserSelect']);a.DomUtil.disableTextSelection=function(){if(c){var a=b.documentElement.style;this._userSelect=a[c],a[c]='none'}},a.DomUtil.enableTextSelection=function(){c&&(b.documentElement.style[c]=this._userSelect,delete this._userSelect)}}a.DomUtil.disableImageDrag=function(){a.DomEvent.on(d,'dragstart',a.DomEvent.preventDefault)},a.DomUtil.enableImageDrag=function(){a.DomEvent.off(d,'dragstart',a.DomEvent.preventDefault)},a.DomUtil.preventOutline=function(b){for(;b.tabIndex===-1;){b=b.parentNode}b&&b.style&&(a.DomUtil.restoreOutline(),this._outlineElement=b,this._outlineStyle=b.style.outline,b.style.outline='none',a.DomEvent.on(d,'keydown',a.DomUtil.restoreOutline,this))},a.DomUtil.restoreOutline=function(){this._outlineElement&&(this._outlineElement.style.outline=this._outlineStyle,delete this._outlineElement,delete this._outlineStyle,a.DomEvent.off(d,'keydown',a.DomUtil.restoreOutline,this))}}(),a.LatLng=function(b,a,d){if(isNaN(b)||isNaN(a)){throw new Error('Invalid LatLng object: ('+b+', '+a+')')}this.lat=+b,this.lng=+a,d!==c&&(this.alt=+d)},a.LatLng.prototype={equals:function(b,d){if(!b){return !1}b=a.latLng(b);var e=Math.max(Math.abs(this.lat-b.lat),Math.abs(this.lng-b.lng));return e<=(d===c?1.0E-9:d)},toString:function(b){return 'LatLng('+a.Util.formatNum(this.lat,b)+', '+a.Util.formatNum(this.lng,b)+')'},distanceTo:function(b){return a.CRS.Earth.distance(this,a.latLng(b))},wrap:function(){return a.CRS.Earth.wrapLatLng(this)},toBounds:function(d){var b=180*d/40075017,c=b/Math.cos(Math.PI/180*this.lat);return a.latLngBounds([this.lat-b,this.lng-c],[this.lat+b,this.lng+c])},clone:function(){return new a.LatLng(this.lat,this.lng,this.alt)}},a.latLng=function(b,d,e){return b instanceof a.LatLng?b:a.Util.isArray(b)&&'object'!=typeof b[0]?3===b.length?new a.LatLng(b[0],b[1],b[2]):2===b.length?new a.LatLng(b[0],b[1]):null:b===c||null===b?b:'object'==typeof b&&'lat' in b?new a.LatLng(b.lat,'lng' in b?b.lng:b.lon,b.alt):d===c?null:new a.LatLng(b,d,e)},a.LatLngBounds=function(b,c){if(b){for(var d=c?[b,c]:b,a=0,e=d.length;a<e;a++){this.extend(d[a])}}},a.LatLngBounds.prototype={extend:function(b){var c,d,e=this._southWest,f=this._northEast;if(b instanceof a.LatLng){c=b,d=b}else {if(!(b instanceof a.LatLngBounds)){return b?this.extend(a.latLng(b)||a.latLngBounds(b)):this}if(c=b._southWest,d=b._northEast,!c||!d){return this}}return e||f?(e.lat=Math.min(c.lat,e.lat),e.lng=Math.min(c.lng,e.lng),f.lat=Math.max(d.lat,f.lat),f.lng=Math.max(d.lng,f.lng)):(this._southWest=new a.LatLng(c.lat,c.lng),this._northEast=new a.LatLng(d.lat,d.lng)),this},pad:function(f){var b=this._southWest,c=this._northEast,d=Math.abs(b.lat-c.lat)*f,e=Math.abs(b.lng-c.lng)*f;return new a.LatLngBounds(new a.LatLng(b.lat-d,b.lng-e),new a.LatLng(c.lat+d,c.lng+e))},getCenter:function(){return new a.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new a.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new a.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(b){b='number'==typeof b[0]||b instanceof a.LatLng?a.latLng(b):a.latLngBounds(b);var c,d,e=this._southWest,f=this._northEast;return b instanceof a.LatLngBounds?(c=b.getSouthWest(),d=b.getNorthEast()):c=d=b,c.lat>=e.lat&&d.lat<=f.lat&&c.lng>=e.lng&&d.lng<=f.lng},intersects:function(b){b=a.latLngBounds(b);var c=this._southWest,d=this._northEast,e=b.getSouthWest(),f=b.getNorthEast(),h=f.lat>=c.lat&&e.lat<=d.lat,g=f.lng>=c.lng&&e.lng<=d.lng;return h&&g},overlaps:function(b){b=a.latLngBounds(b);var c=this._southWest,d=this._northEast,e=b.getSouthWest(),f=b.getNorthEast(),h=f.lat>c.lat&&e.lat<d.lat,g=f.lng>c.lng&&e.lng<d.lng;return h&&g},toBBoxString:function(){return [this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(',')},equals:function(b){return !!b&&(b=a.latLngBounds(b),this._southWest.equals(b.getSouthWest())&&this._northEast.equals(b.getNorthEast()))},isValid:function(){return !(!this._southWest||!this._northEast)}},a.latLngBounds=function(b,c){return b instanceof a.LatLngBounds?b:new a.LatLngBounds(b,c)},a.Projection={},a.Projection.LonLat={project:function(b){return new a.Point(b.lng,b.lat)},unproject:function(b){return new a.LatLng(b.y,b.x)},bounds:a.bounds([-180,-90],[180,90])},a.Projection.SphericalMercator={R:6378137,MAX_LATITUDE:85.0511287798,project:function(e){var b=Math.PI/180,c=this.MAX_LATITUDE,f=Math.max(Math.min(c,e.lat),-c),d=Math.sin(f*b);return new a.Point(this.R*e.lng*b,this.R*Math.log((1+d)/(1-d))/2)},unproject:function(c){var b=180/Math.PI;return new a.LatLng((2*Math.atan(Math.exp(c.y/this.R))-Math.PI/2)*b,c.x*b/this.R)},bounds:function(){var b=6378137*Math.PI;return a.bounds([-b,-b],[b,b])}()},a.CRS={latLngToPoint:function(d,a){var b=this.projection.project(d),c=this.scale(a);return this.transformation._transform(b,c)},pointToLatLng:function(d,a){var b=this.scale(a),c=this.transformation.untransform(d,b);return this.projection.unproject(c)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(f){if(this.infinite){return null}var b=this.projection.bounds,c=this.scale(f),d=this.transformation.transform(b.min,c),e=this.transformation.transform(b.max,c);return a.bounds(d,e)},infinite:!1,wrapLatLng:function(b){var c=this.wrapLng?a.Util.wrapNum(b.lng,this.wrapLng,!0):b.lng,d=this.wrapLat?a.Util.wrapNum(b.lat,this.wrapLat,!0):b.lat,e=b.alt;return a.latLng(d,c,e)}},a.CRS.Simple=a.extend({},a.CRS,{projection:a.Projection.LonLat,transformation:new a.Transformation(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(d,a){var b=a.lng-d.lng,c=a.lat-d.lat;return Math.sqrt(b*b+c*c)},infinite:!0}),a.CRS.Earth=a.extend({},a.CRS,{wrapLng:[-180,180],R:6371000,distance:function(e,b){var a=Math.PI/180,c=e.lat*a,d=b.lat*a,f=Math.sin(c)*Math.sin(d)+Math.cos(c)*Math.cos(d)*Math.cos((b.lng-e.lng)*a);return this.R*Math.acos(Math.min(f,1))}}),a.CRS.EPSG3857=a.extend({},a.CRS.Earth,{code:'EPSG:3857',projection:a.Projection.SphericalMercator,transformation:function(){var b=0.5/(Math.PI*a.Projection.SphericalMercator.R);return new a.Transformation(b,0.5,-b,0.5)}()}),a.CRS.EPSG900913=a.extend({},a.CRS.EPSG3857,{code:'EPSG:900913'}),a.CRS.EPSG4326=a.extend({},a.CRS.Earth,{code:'EPSG:4326',projection:a.Projection.LonLat,transformation:new a.Transformation(1/180,1,-1/180,0.5)}),a.Map=a.Evented.extend({options:{crs:a.CRS.EPSG3857,center:c,zoom:c,minZoom:c,maxZoom:c,layers:[],maxBounds:c,renderer:c,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(d,b){b=a.setOptions(this,b),this._initContainer(d),this._initLayout(),this._onResize=a.bind(this._onResize,this),this._initEvents(),b.maxBounds&&this.setMaxBounds(b.maxBounds),b.zoom!==c&&(this._zoom=this._limitZoom(b.zoom)),b.center&&b.zoom!==c&&this.setView(a.latLng(b.center),b.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this.callInitHooks(),this._addLayers(this.options.layers)},setView:function(d,b){return b=b===c?this.getZoom():b,this._resetView(a.latLng(d),b),this},setZoom:function(a,b){return this._loaded?this.setView(this.getCenter(),a,{zoom:b}):(this._zoom=a,this)},zoomIn:function(b,c){return b=b||(a.Browser.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+b,c)},zoomOut:function(b,c){return b=b||(a.Browser.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-b,c)},setZoomAround:function(b,c,g){var h=this.getZoomScale(c),d=this.getSize().divideBy(2),i=b instanceof a.Point?b:this.latLngToContainerPoint(b),e=i.subtract(d).multiplyBy(1-1/h),f=this.containerPointToLatLng(d.add(e));return this.setView(f,c,{zoom:g})},_getBoundsCenterZoom:function(d,b){b=b||{},d=d.getBounds?d.getBounds():a.latLngBounds(d);var e=a.point(b.paddingTopLeft||b.padding||[0,0]),f=a.point(b.paddingBottomRight||b.padding||[0,0]),c=this.getBoundsZoom(d,!1,e.add(f));c='number'==typeof b.maxZoom?Math.min(b.maxZoom,c):c;var j=f.subtract(e).divideBy(2),g=this.project(d.getSouthWest(),c),h=this.project(d.getNorthEast(),c),i=this.unproject(g.add(h).divideBy(2).add(j),c);return {center:i,zoom:c}},fitBounds:function(b,c){if(b=a.latLngBounds(b),!b.isValid()){throw new Error('Bounds are not valid.')}var d=this._getBoundsCenterZoom(b,c);return this.setView(d.center,d.zoom,c)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(b,a){return this.setView(b,this._zoom,{pan:a})},panBy:function(b){return this.fire('movestart'),this._rawPanBy(a.point(b)),this.fire('move'),this.fire('moveend')},setMaxBounds:function(b){return b=a.latLngBounds(b),b.isValid()?(this.options.maxBounds&&this.off('moveend',this._panInsideMaxBounds),this.options.maxBounds=b,this._loaded&&this._panInsideMaxBounds(),this.on('moveend',this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off('moveend',this._panInsideMaxBounds))},setMinZoom:function(a){return this.options.minZoom=a,this._loaded&&this.getZoom()<this.options.minZoom?this.setZoom(a):this},setMaxZoom:function(a){return this.options.maxZoom=a,this._loaded&&this.getZoom()>this.options.maxZoom?this.setZoom(a):this},panInsideBounds:function(e,d){this._enforcingBounds=!0;var b=this.getCenter(),c=this._limitCenter(b,this._zoom,a.latLngBounds(e));return b.equals(c)||this.panTo(c,d),this._enforcingBounds=!1,this},invalidateSize:function(b){if(!this._loaded){return this}b=a.extend({animate:!1,pan:!0},b===!0?{animate:!0}:b);var d=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var e=this.getSize(),f=d.divideBy(2).round(),g=e.divideBy(2).round(),c=f.subtract(g);return c.x||c.y?(b.animate&&b.pan?this.panBy(c):(b.pan&&this._rawPanBy(c),this.fire('move'),b.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a.bind(this.fire,this,'moveend'),200)):this.fire('moveend')),this.fire('resize',{oldSize:d,newSize:e})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire('viewreset'),this._stop()},addHandler:function(c,a){if(!a){return this}var b=this[c]=new a(this);return this._handlers.push(b),this.options[c]&&b.enable(),this},remove:function(){this._initEvents(!0);try{delete this._container._leaflet}catch(i){this._container._leaflet=c}a.DomUtil.remove(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this._loaded&&this.fire('unload');for(var b in this._layers){this._layers[b].remove()}return this},createPane:function(b,d){var e='leaflet-pane'+(b?' leaflet-'+b.replace('Pane','')+'-pane':''),c=a.DomUtil.create('div',e,d||this._mapPane);return b&&(this._panes[b]=c),c},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var b=this.getPixelBounds(),c=this.unproject(b.getBottomLeft()),d=this.unproject(b.getTopRight());return new a.LatLngBounds(c,d)},getMinZoom:function(){return this.options.minZoom===c?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===c?this._layersMaxZoom===c?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(d,j,e){d=a.latLngBounds(d),e=a.point(e||[0,0]);var b=this.getZoom()||0,m=this.getMinZoom(),l=this.getMaxZoom(),h=d.getNorthWest(),k=d.getSouthEast(),f=this.getSize().subtract(e),g=this.project(k,b).subtract(this.project(h,b)),c=a.Browser.any3d?this.options.zoomSnap:1,i=Math.min(f.x/g.x,f.y/g.y);return b=this.getScaleZoom(i,b),c&&(b=Math.round(b/(c/100))*(c/100),b=j?Math.ceil(b/c)*c:Math.floor(b/c)*c),Math.max(m,Math.min(l,b))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new a.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(d,c){var b=this._getTopLeftPoint(d,c);return new a.Bounds(b,b.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(a===c?this.getZoom():a)},getPane:function(a){return 'string'==typeof a?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(d,a){var b=this.options.crs;return a=a===c?this._zoom:a,b.scale(d)/b.scale(a)},getScaleZoom:function(d,a){var b=this.options.crs;return a=a===c?this._zoom:a,b.zoom(d*b.scale(a))},project:function(d,b){return b=b===c?this._zoom:b,this.options.crs.latLngToPoint(a.latLng(d),b)},unproject:function(d,b){return b=b===c?this._zoom:b,this.options.crs.pointToLatLng(a.point(d),b)},layerPointToLatLng:function(c){var b=a.point(c).add(this.getPixelOrigin());return this.unproject(b)},latLngToLayerPoint:function(c){var b=this.project(a.latLng(c))._round();return b._subtract(this.getPixelOrigin())},wrapLatLng:function(b){return this.options.crs.wrapLatLng(a.latLng(b))},distance:function(c,b){return this.options.crs.distance(a.latLng(c),a.latLng(b))},containerPointToLayerPoint:function(b){return a.point(b).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(b){return a.point(b).add(this._getMapPanePos())},containerPointToLatLng:function(c){var b=this.containerPointToLayerPoint(a.point(c));return this.layerPointToLatLng(b)},latLngToContainerPoint:function(b){return this.layerPointToContainerPoint(this.latLngToLayerPoint(a.latLng(b)))},mouseEventToContainerPoint:function(b){return a.DomEvent.getMousePosition(b,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(c){var b=this._container=a.DomUtil.get(c);if(!b){throw new Error('Map container not found.')}if(b._leaflet){throw new Error('Map container is already initialized.')}a.DomEvent.addListener(b,'scroll',this._onScroll,this),b._leaflet=!0},_initLayout:function(){var c=this._container;this._fadeAnimated=this.options.fadeAnimation&&a.Browser.any3d,a.DomUtil.addClass(c,'leaflet-container'+(a.Browser.touch?' leaflet-touch':'')+(a.Browser.retina?' leaflet-retina':'')+(a.Browser.ielt9?' leaflet-oldie':'')+(a.Browser.safari?' leaflet-safari':'')+(this._fadeAnimated?' leaflet-fade-anim':''));var b=a.DomUtil.getStyle(c,'position');'absolute'!==b&&'relative'!==b&&'fixed'!==b&&(c.style.position='relative'),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var b=this._panes={};this._paneRenderers={},this._mapPane=this.createPane('mapPane',this._container),a.DomUtil.setPosition(this._mapPane,new a.Point(0,0)),this.createPane('tilePane'),this.createPane('shadowPane'),this.createPane('overlayPane'),this.createPane('markerPane'),this.createPane('popupPane'),this.options.markerZoomAnimation||(a.DomUtil.addClass(b.markerPane,'leaflet-zoom-hide'),a.DomUtil.addClass(b.shadowPane,'leaflet-zoom-hide'))},_resetView:function(e,b){a.DomUtil.setPosition(this._mapPane,new a.Point(0,0));var d=!this._loaded;this._loaded=!0,b=this._limitZoom(b),this.fire('viewprereset');var c=this._zoom!==b;this._moveStart(c)._move(e,b)._moveEnd(c),this.fire('viewreset'),d&&this.fire('load')},_moveStart:function(a){return a&&this.fire('zoomstart'),this.fire('movestart')},_move:function(d,a,b){a===c&&(a=this._zoom);var e=this._zoom!==a;return this._zoom=a,this._lastCenter=d,this._pixelOrigin=this._getNewPixelOrigin(d),(e||b&&b.pinch)&&this.fire('zoom',b),this.fire('move',b)},_moveEnd:function(a){return a&&this.fire('zoomend'),this.fire('moveend')},_stop:function(){return a.Util.cancelAnimFrame(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(b){a.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(b))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded){throw new Error('Set map center and zoom first.')}},_initEvents:function(c){if(a.DomEvent){this._targets={},this._targets[a.stamp(this._container)]=this;var b=c?'off':'on';a.DomEvent[b](this._container,'click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress',this._handleDOMEvent,this),this.options.trackResize&&a.DomEvent[b](d,'resize',this._onResize,this),a.Browser.any3d&&this.options.transform3DLimit&&this[b]('moveend',this._onMoveEnd)}},_onResize:function(){a.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=a.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(e,d){for(var c,f=[],g='mouseout'===d||'mouseover'===d,b=e.target||e.srcElement,h=!1;b;){if(c=this._targets[a.stamp(b)],c&&('click'===d||'preclick'===d)&&!e._simulated&&this._draggableMoved(c)){h=!0;break}if(c&&c.listens(d,!0)){if(g&&!a.DomEvent._isExternalTarget(b,e)){break}if(f.push(c),g){break}}if(b===this._container){break}b=b.parentNode}return f.length||h||g||!a.DomEvent._isExternalTarget(b,e)||(f=[this]),f},_handleDOMEvent:function(b){if(this._loaded&&!a.DomEvent._skipped(b)){var c='keypress'===b.type&&13===b.keyCode?'click':b.type;'mousedown'===c&&a.DomUtil.preventOutline(b.target||b.srcElement),this._fireDOMEvent(b,c)}},_fireDOMEvent:function(c,e,b){if('click'===c.type){var h=a.Util.extend({},c);h.type='preclick',this._fireDOMEvent(h,h.type,b)}if(!c._stopped&&(b=(b||[]).concat(this._findEventTargets(c,e)),b.length)){var g=b[0];'contextmenu'===e&&g.listens(e,!0)&&a.DomEvent.preventDefault(c);var d={originalEvent:c};if('keypress'!==c.type){var i=g instanceof a.Marker;d.containerPoint=i?this.latLngToContainerPoint(g.getLatLng()):this.mouseEventToContainerPoint(c),d.layerPoint=this.containerPointToLayerPoint(d.containerPoint),d.latlng=i?g.getLatLng():this.layerPointToLatLng(d.layerPoint)}for(var f=0;f<b.length;f++){if(b[f].fire(e,d,!0),d.originalEvent._stopped||b[f].options.nonBubblingEvents&&a.Util.indexOf(b[f].options.nonBubblingEvents,e)!==-1){return}}}},_draggableMoved:function(a){return a=a.options.draggable?a:this,a.dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,b=this._handlers.length;a<b;a++){this._handlers[a].disable()}},whenReady:function(b,a){return this._loaded?b.call(a||this,{target:this}):this.on('load',b,a),this},_getMapPanePos:function(){return a.DomUtil.getPosition(this._mapPane)||new a.Point(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(b,a){var d=b&&a!==c?this._getNewPixelOrigin(b,a):this.getPixelOrigin();return d.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(c,a){var b=this.getSize()._divideBy(2);return this.project(c,a)._subtract(b)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(d,a,b){var c=this._getNewPixelOrigin(b,a);return this.project(d,a)._subtract(c)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(d,b,f){if(!f){return d}var c=this.project(d,b),g=this.getSize().divideBy(2),h=new a.Bounds(c.subtract(g),c.add(g)),e=this._getBoundsOffset(h,f,b);return e.round().equals([0,0])?d:this.unproject(c.add(e),b)},_limitOffset:function(b,c){if(!c){return b}var d=this.getPixelBounds(),e=new a.Bounds(d.min.add(b),d.max.add(b));return b.add(this._getBoundsOffset(e,c))},_getBoundsOffset:function(g,b,c){var d=a.bounds(this.project(b.getNorthEast(),c),this.project(b.getSouthWest(),c)),f=d.min.subtract(g.min),e=d.max.subtract(g.max),h=this._rebound(f.x,-e.x),i=this._rebound(f.y,-e.y);return new a.Point(h,i)},_rebound:function(b,a){return b+a>0?Math.round(b-a)/2:Math.max(0,Math.ceil(b))-Math.max(0,Math.floor(a))},_limitZoom:function(c){var d=this.getMinZoom(),e=this.getMaxZoom(),b=a.Browser.any3d?this.options.zoomSnap:1;return b&&(c=Math.round(c/b)*b),Math.max(d,Math.min(e,c))}}),a.map=function(c,b){return new a.Map(c,b)},a.Layer=a.Evented.extend({options:{pane:'overlayPane',nonBubblingEvents:[]},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(b){return this._map._targets[a.stamp(b)]=this,this},removeInteractiveTarget:function(b){return delete this._map._targets[a.stamp(b)],this},_layerAdd:function(b){var a=b.target;a.hasLayer(this)&&(this._map=a,this._zoomAnimated=a._zoomAnimated,this.getEvents&&a.on(this.getEvents(),this),this.onAdd(a),this.getAttribution&&this._map.attributionControl&&this._map.attributionControl.addAttribution(this.getAttribution()),this.fire('add'),a.fire('layeradd',{layer:this}))}}),a.Map.include({addLayer:function(b){var c=a.stamp(b);return this._layers[c]?this:(this._layers[c]=b,b._mapToAdd=this,b.beforeAdd&&b.beforeAdd(this),this.whenReady(b._layerAdd,b),this)},removeLayer:function(b){var c=a.stamp(b);return this._layers[c]?(this._loaded&&b.onRemove(this),b.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(b.getAttribution()),b.getEvents&&this.off(b.getEvents(),b),delete this._layers[c],this._loaded&&(this.fire('layerremove',{layer:b}),b.fire('remove')),b._map=b._mapToAdd=null,this):this},hasLayer:function(b){return !!b&&a.stamp(b) in this._layers},eachLayer:function(c,a){for(var b in this._layers){c.call(a,this._layers[b])}return this},_addLayers:function(b){b=b?a.Util.isArray(b)?b:[b]:[];for(var c=0,d=b.length;c<d;c++){this.addLayer(b[c])}},_addZoomLimit:function(b){!isNaN(b.options.maxZoom)&&isNaN(b.options.minZoom)||(this._zoomBoundLayers[a.stamp(b)]=b,this._updateZoomLevels())},_removeZoomLimit:function(c){var b=a.stamp(c);this._zoomBoundLayers[b]&&(delete this._zoomBoundLayers[b],this._updateZoomLevels())},_updateZoomLevels:function(){var b=1/0,a=-(1/0),e=this._getZoomSpan();for(var f in this._zoomBoundLayers){var d=this._zoomBoundLayers[f].options;b=d.minZoom===c?b:Math.min(b,d.minZoom),a=d.maxZoom===c?a:Math.max(a,d.maxZoom)}this._layersMaxZoom=a===-(1/0)?c:a,this._layersMinZoom=b===1/0?c:b,e!==this._getZoomSpan()&&this.fire('zoomlevelschange')}}),a.Projection.Mercator={R:6378137,R_MINOR:6356752.314245179,bounds:a.bounds([-2.003750834279E7,-1.549657073972E7],[2.003750834279E7,1.876465623138E7]),project:function(h){var e=Math.PI/180,c=this.R,b=h.lat*e,g=this.R_MINOR/c,f=Math.sqrt(1-g*g),d=f*Math.sin(b),i=Math.tan(Math.PI/4-b/2)/Math.pow((1-d)/(1+d),f/2);return b=-c*Math.log(Math.max(i,1.0E-10)),new a.Point(h.lng*e*c,b)},unproject:function(k){for(var b,g=180/Math.PI,d=this.R,j=this.R_MINOR/d,i=Math.sqrt(1-j*j),f=Math.exp(-k.y/d),c=Math.PI/2-2*Math.atan(f),h=0,e=0.1;h<15&&Math.abs(e)>1.0E-7;h++){b=i*Math.sin(c),b=Math.pow((1-b)/(1+b),i/2),e=Math.PI/2-2*Math.atan(f*b)-c,c+=e}return new a.LatLng(c*g,k.x*g/d)}},a.CRS.EPSG3395=a.extend({},a.CRS.Earth,{code:'EPSG:3395',projection:a.Projection.Mercator,transformation:function(){var b=0.5/(Math.PI*a.Projection.Mercator.R);return new a.Transformation(b,0.5,-b,0.5)}()}),a.GridLayer=a.Layer.extend({options:{tileSize:256,opacity:1,updateWhenIdle:a.Browser.mobile,updateWhenZooming:!0,updateInterval:200,attribution:null,zIndex:1,bounds:null,minZoom:0,maxZoom:c,noWrap:!1,pane:'tilePane',className:'',keepBuffer:2},initialize:function(b){b=a.setOptions(this,b)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(b){this._removeAllTiles(),a.DomUtil.remove(this._container),b._removeZoomLimit(this),this._container=null,this._tileZoom=null},bringToFront:function(){return this._map&&(a.DomUtil.toFront(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(a.DomUtil.toBack(this._container),this._setAutoZIndex(Math.min)),this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var b={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=a.Util.throttle(this._onMoveEnd,this.options.updateInterval,this)),b.move=this._onMove),this._zoomAnimated&&(b.zoomanim=this._animateZoom),b},createTile:function(){return b.createElement('div')},getTileSize:function(){var b=this.options.tileSize;return b instanceof a.Point?b:new a.Point(b,b)},_updateZIndex:function(){this._container&&this.options.zIndex!==c&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e){for(var c,d=this.getPane().children,a=-e(-(1/0),1/0),b=0,f=d.length;b<f;b++){c=d[b].style.zIndex,d[b]!==this._container&&c&&(a=e(a,+c))}isFinite(a)&&(this.options.zIndex=a+e(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!a.Browser.ielt9){a.DomUtil.setOpacity(this._container,this.options.opacity);var g=+new Date(),c=!1,d=!1;for(var f in this._tiles){var b=this._tiles[f];if(b.current&&b.loaded){var e=Math.min(1,(g-b.loaded)/200);a.DomUtil.setOpacity(b.el,e),e<1?c=!0:(b.active&&(d=!0),b.active=!0)}}d&&!this._noPrune&&this._pruneTiles(),c&&(a.Util.cancelAnimFrame(this._fadeFrame),this._fadeFrame=a.Util.requestAnimFrame(this._updateOpacity,this))}},_initContainer:function(){this._container||(this._container=a.DomUtil.create('div','leaflet-layer '+(this.options.className||'')),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var e=this._tileZoom,g=this.options.maxZoom;if(e===c){return c}for(var d in this._levels){this._levels[d].el.children.length||d===e?this._levels[d].el.style.zIndex=g-Math.abs(e-d):(a.DomUtil.remove(this._levels[d].el),this._removeTilesAtZoom(d),delete this._levels[d])}var b=this._levels[e],f=this._map;return b||(b=this._levels[e]={},b.el=a.DomUtil.create('div','leaflet-tile-container leaflet-zoom-animated',this._container),b.el.style.zIndex=g,b.origin=f.project(f.unproject(f.getPixelOrigin()),e).round(),b.zoom=e,this._setZoomTransform(b,f.getCenter(),f.getZoom()),a.Util.falseFn(b.el.offsetWidth)),this._level=b,b},_pruneTiles:function(){if(this._map){var c,b,d=this._map.getZoom();if(d>this.options.maxZoom||d<this.options.minZoom){return void this._removeAllTiles()}for(c in this._tiles){b=this._tiles[c],b.retain=b.current}for(c in this._tiles){if(b=this._tiles[c],b.current&&!b.active){var a=b.coords;this._retainParent(a.x,a.y,a.z,a.z-5)||this._retainChildren(a.x,a.y,a.z,a.z+2)}}for(c in this._tiles){this._tiles[c].retain||this._removeTile(c)}}},_removeTilesAtZoom:function(b){for(var a in this._tiles){this._tiles[a].coords.z===b&&this._removeTile(a)}},_removeAllTiles:function(){for(var a in this._tiles){this._removeTile(a)}},_invalidateAll:function(){for(var b in this._levels){a.DomUtil.remove(this._levels[b].el),delete this._levels[b]}this._removeAllTiles(),this._tileZoom=null},_retainParent:function(k,h,i,e){var g=Math.floor(k/2),f=Math.floor(h/2),c=i-1,d=new a.Point(+g,+f);d.z=+c;var j=this._tileCoordsToKey(d),b=this._tiles[j];return b&&b.active?(b.retain=!0,!0):(b&&b.loaded&&(b.retain=!0),c>e&&this._retainParent(g,f,c,e))},_retainChildren:function(i,g,e,h){for(var d=2*i;d<2*i+2;d++){for(var c=2*g;c<2*g+2;c++){var f=new a.Point(d,c);f.z=e+1;var j=this._tileCoordsToKey(f),b=this._tiles[j];b&&b.active?b.retain=!0:(b&&b.loaded&&(b.retain=!0),e+1<h&&this._retainChildren(d,c,e+1,h))}}},_resetView:function(a){var b=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),b,b)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_setView:function(e,b,d,f){var a=Math.round(b);(this.options.maxZoom!==c&&a>this.options.maxZoom||this.options.minZoom!==c&&a<this.options.minZoom)&&(a=c);var g=this.options.updateWhenZooming&&a!==this._tileZoom;f&&!g||(this._tileZoom=a,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),a!==c&&this._update(e),d||this._pruneTiles(),this._noPrune=!!d),this._setZoomTransforms(e,b)},_setZoomTransforms:function(c,a){for(var b in this._levels){this._setZoomTransform(this._levels[b],c,a)}},_setZoomTransform:function(b,f,c){var d=this._map.getZoomScale(c,b.zoom),e=b.origin.multiplyBy(d).subtract(this._map._getNewPixelOrigin(f,c)).round();a.Browser.any3d?a.DomUtil.setTransform(b.el,e,d):a.DomUtil.setPosition(b.el,e)},_resetGrid:function(){var b=this._map,a=b.options.crs,c=this._tileSize=this.getTileSize(),d=this._tileZoom,e=this._map.getPixelWorldBounds(this._tileZoom);e&&(this._globalTileRange=this._pxBoundsToTileRange(e)),this._wrapX=a.wrapLng&&!this.options.noWrap&&[Math.floor(b.project([0,a.wrapLng[0]],d).x/c.x),Math.ceil(b.project([0,a.wrapLng[1]],d).x/c.y)],this._wrapY=a.wrapLat&&!this.options.noWrap&&[Math.floor(b.project([a.wrapLat[0],0],d).y/c.x),Math.ceil(b.project([a.wrapLat[1],0],d).y/c.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._resetView()},_getTiledPixelBounds:function(g){var b=this._map,e=b._animatingZoom?Math.max(b._animateToZoom,b.getZoom()):b.getZoom(),f=b.getZoomScale(e,this._tileZoom),d=b.project(g,this._tileZoom).floor(),c=b.getSize().divideBy(2*f);return new a.Bounds(d.subtract(c),d.add(c))},_update:function(h){var l=this._map;if(l){var p=l.getZoom();if(h===c&&(h=l.getCenter()),this._tileZoom!==c){var s=this._getTiledPixelBounds(h),d=this._pxBoundsToTileRange(s),o=d.getCenter(),f=[],i=this.options.keepBuffer,r=new a.Bounds(d.getBottomLeft().subtract([i,-i]),d.getTopRight().add([i,-i]));for(var m in this._tiles){var j=this._tiles[m].coords;j.z===this._tileZoom&&r.contains(a.point(j.x,j.y))||(this._tiles[m].current=!1)}if(Math.abs(p-this._tileZoom)>1){return void this._setView(h,p)}for(var k=d.min.y;k<=d.max.y;k++){for(var e=d.min.x;e<=d.max.x;e++){var g=new a.Point(e,k);if(g.z=this._tileZoom,this._isValidTile(g)){var n=this._tiles[this._tileCoordsToKey(g)];n?n.current=!0:f.push(g)}}}if(f.sort(function(b,a){return b.distanceTo(o)-a.distanceTo(o)}),0!==f.length){this._loading||(this._loading=!0,this.fire('loading'));var q=b.createDocumentFragment();for(e=0;e<f.length;e++){this._addTile(f[e],q)}this._level.el.appendChild(q)}}}},_isValidTile:function(b){var d=this._map.options.crs;if(!d.infinite){var c=this._globalTileRange;if(!d.wrapLng&&(b.x<c.min.x||b.x>c.max.x)||!d.wrapLat&&(b.y<c.min.y||b.y>c.max.y)){return !1}}if(!this.options.bounds){return !0}var e=this._tileCoordsToBounds(b);return a.latLngBounds(this.options.bounds).overlaps(e)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToBounds:function(c){var b=this._map,d=this.getTileSize(),e=c.scaleBy(d),h=e.add(d),g=b.wrapLatLng(b.unproject(e,c.z)),f=b.wrapLatLng(b.unproject(h,c.z));return new a.LatLngBounds(g,f)},_tileCoordsToKey:function(a){return a.x+':'+a.y+':'+a.z},_keyToTileCoords:function(d){var b=d.split(':'),c=new a.Point(+b[0],+b[1]);return c.z=+b[2],c},_removeTile:function(c){var b=this._tiles[c];b&&(a.DomUtil.remove(b.el),delete this._tiles[c],this.fire('tileunload',{tile:b.el,coords:this._keyToTileCoords(c)}))},_initTile:function(b){a.DomUtil.addClass(b,'leaflet-tile');var c=this.getTileSize();b.style.width=c.x+'px',b.style.height=c.y+'px',b.onselectstart=a.Util.falseFn,b.onmousemove=a.Util.falseFn,a.Browser.ielt9&&this.options.opacity<1&&a.DomUtil.setOpacity(b,this.options.opacity),a.Browser.android&&!a.Browser.android23&&(b.style.WebkitBackfaceVisibility='hidden')},_addTile:function(b,d){var e=this._getTilePos(b),f=this._tileCoordsToKey(b),c=this.createTile(this._wrapCoords(b),a.bind(this._tileReady,this,b));this._initTile(c),this.createTile.length<2&&a.Util.requestAnimFrame(a.bind(this._tileReady,this,b,null,c)),a.DomUtil.setPosition(c,e),this._tiles[f]={el:c,coords:b,current:!0},d.appendChild(c),this.fire('tileloadstart',{tile:c,coords:b})},_tileReady:function(c,d,b){if(this._map){d&&this.fire('tileerror',{error:d,tile:b,coords:c});var e=this._tileCoordsToKey(c);b=this._tiles[e],b&&(b.loaded=+new Date(),this._map._fadeAnimated?(a.DomUtil.setOpacity(b.el,0),a.Util.cancelAnimFrame(this._fadeFrame),this._fadeFrame=a.Util.requestAnimFrame(this._updateOpacity,this)):(b.active=!0,this._pruneTiles()),a.DomUtil.addClass(b.el,'leaflet-tile-loaded'),this.fire('tileload',{tile:b.el,coords:c}),this._noTilesToLoad()&&(this._loading=!1,this.fire('load'),a.Browser.ielt9||!this._map._fadeAnimated?a.Util.requestAnimFrame(this._pruneTiles,this):setTimeout(a.bind(this._pruneTiles,this),250)))}},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(b){var c=new a.Point(this._wrapX?a.Util.wrapNum(b.x,this._wrapX):b.x,this._wrapY?a.Util.wrapNum(b.y,this._wrapY):b.y);return c.z=b.z,c},_pxBoundsToTileRange:function(c){var b=this.getTileSize();return new a.Bounds(c.min.unscaleBy(b).floor(),c.max.unscaleBy(b).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles){if(!this._tiles[a].loaded){return !1}}return !0}}),a.gridLayer=function(b){return new a.GridLayer(b)},a.TileLayer=a.GridLayer.extend({options:{minZoom:0,maxZoom:18,maxNativeZoom:null,subdomains:'abc',errorTileUrl:'',zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(c,b){this._url=c,b=a.setOptions(this,b),b.detectRetina&&a.Browser.retina&&b.maxZoom>0&&(b.tileSize=Math.floor(b.tileSize/2),b.zoomReverse?(b.zoomOffset--,b.minZoom++):(b.zoomOffset++,b.maxZoom--),b.minZoom=Math.max(0,b.minZoom)),'string'==typeof b.subdomains&&(b.subdomains=b.subdomains.split('')),a.Browser.android||this.on('tileunload',this._onTileRemove)},setUrl:function(b,a){return this._url=b,a||this.redraw(),this},createTile:function(e,d){var c=b.createElement('img');return a.DomEvent.on(c,'load',a.bind(this._tileOnLoad,this,d,c)),a.DomEvent.on(c,'error',a.bind(this._tileOnError,this,d,c)),this.options.crossOrigin&&(c.crossOrigin=''),c.alt='',c.src=this.getTileUrl(e),c},getTileUrl:function(b){var c={r:a.Browser.retina?'@2x':'',s:this._getSubdomain(b),x:b.x,y:b.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var d=this._globalTileRange.max.y-b.y;this.options.tms&&(c.y=d),c['-y']=d}return a.Util.template(this._url,a.extend(c,this.options))},_tileOnLoad:function(c,b){a.Browser.ielt9?setTimeout(a.bind(c,this,null,b),0):c(null,b)},_tileOnError:function(d,a,c){var b=this.options.errorTileUrl;b&&(a.src=b),d(c,a)},getTileSize:function(){var e=this._map,c=a.GridLayer.prototype.getTileSize.call(this),d=this._tileZoom+this.options.zoomOffset,b=this.options.maxNativeZoom;return null!==b&&d>b?c.divideBy(e.getZoomScale(b,d)).round():c},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var b=this.options,a=this._tileZoom;return b.zoomReverse&&(a=b.maxZoom-a),a+=b.zoomOffset,null!==b.maxNativeZoom?Math.min(a,b.maxNativeZoom):a},_getSubdomain:function(a){var b=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[b]},_abortLoading:function(){var c,b;for(c in this._tiles){this._tiles[c].coords.z!==this._tileZoom&&(b=this._tiles[c].el,b.onload=a.Util.falseFn,b.onerror=a.Util.falseFn,b.complete||(b.src=a.Util.emptyImageUrl,a.DomUtil.remove(b)))}}}),a.tileLayer=function(c,b){return new a.TileLayer(c,b)},a.TileLayer.WMS=a.TileLayer.extend({defaultWmsParams:{service:'WMS',request:'GetMap',layers:'',styles:'',format:'image/jpeg',transparent:!1,version:'1.1.1'},options:{crs:null,uppercase:!1},initialize:function(e,b){this._url=e;var c=a.extend({},this.defaultWmsParams);for(var d in b){d in this.options||(c[d]=b[d])}b=a.setOptions(this,b),c.width=c.height=b.tileSize*(b.detectRetina&&a.Browser.retina?2:1),this.wmsParams=c},onAdd:function(b){this._crs=this.options.crs||b.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var c=this._wmsVersion>=1.3?'crs':'srs';this.wmsParams[c]=this._crs.code,a.TileLayer.prototype.onAdd.call(this,b)},getTileUrl:function(f){var d=this._tileCoordsToBounds(f),b=this._crs.project(d.getNorthWest()),c=this._crs.project(d.getSouthEast()),g=(this._wmsVersion>=1.3&&this._crs===a.CRS.EPSG4326?[c.y,b.x,b.y,c.x]:[b.x,c.y,c.x,b.y]).join(','),e=a.TileLayer.prototype.getTileUrl.call(this,f);return e+a.Util.getParamString(this.wmsParams,e,this.options.uppercase)+(this.options.uppercase?'&BBOX=':'&bbox=')+g},setParams:function(c,b){return a.extend(this.wmsParams,c),b||this.redraw(),this}}),a.tileLayer.wms=function(c,b){return new a.TileLayer.WMS(c,b)},a.ImageOverlay=a.Layer.extend({options:{opacity:1,alt:'',interactive:!1,attribution:null,crossOrigin:!1},initialize:function(d,b,c){this._url=d,this._bounds=a.latLngBounds(b),a.setOptions(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(a.DomUtil.addClass(this._image,'leaflet-interactive'),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){a.DomUtil.remove(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&a.DomUtil.toFront(this._image),this},bringToBack:function(){return this._map&&a.DomUtil.toBack(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=a,this._map&&this._reset(),this},getAttribution:function(){return this.options.attribution},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var b=this._image=a.DomUtil.create('img','leaflet-image-layer '+(this._zoomAnimated?'leaflet-zoom-animated':''));b.onselectstart=a.Util.falseFn,b.onmousemove=a.Util.falseFn,b.onload=a.bind(this.fire,this,'load'),this.options.crossOrigin&&(b.crossOrigin=''),b.src=this._url,b.alt=this.options.alt},_animateZoom:function(b){var c=this._map.getZoomScale(b.zoom),d=this._map._latLngToNewLayerPoint(this._bounds.getNorthWest(),b.zoom,b.center);a.DomUtil.setTransform(this._image,d,c)},_reset:function(){var b=this._image,c=new a.Bounds(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),d=c.getSize();a.DomUtil.setPosition(b,c.min),b.style.width=d.x+'px',b.style.height=d.y+'px'},_updateOpacity:function(){a.DomUtil.setOpacity(this._image,this.options.opacity)}}),a.imageOverlay=function(d,b,c){return new a.ImageOverlay(d,b,c)},a.Icon=a.Class.extend({initialize:function(b){a.setOptions(this,b)},createIcon:function(a){return this._createIcon('icon',a)},createShadow:function(a){return this._createIcon('shadow',a)},_createIcon:function(b,a){var c=this._getIconUrl(b);if(!c){if('icon'===b){throw new Error('iconUrl not set in Icon options (see the docs).')}return null}var d=this._createImg(c,a&&'IMG'===a.tagName?a:null);return this._setIconStyles(d,b),d},_setIconStyles:function(d,f){var e=this.options,b=e[f+'Size'];'number'==typeof b&&(b=[b,b]);var c=a.point(b),g=a.point('shadow'===f&&e.shadowAnchor||e.iconAnchor||c&&c.divideBy(2,!0));d.className='leaflet-marker-'+f+' '+(e.className||''),g&&(d.style.marginLeft=-g.x+'px',d.style.marginTop=-g.y+'px'),c&&(d.style.width=c.x+'px',d.style.height=c.y+'px')},_createImg:function(c,a){return a=a||b.createElement('img'),a.src=c,a},_getIconUrl:function(b){return a.Browser.retina&&this.options[b+'RetinaUrl']||this.options[b+'Url']}}),a.icon=function(b){return new a.Icon(b)},a.Icon.Default=a.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},_getIconUrl:function(b){var c=b+'Url';if(this.options[c]){return this.options[c]}var d=a.Icon.Default.imagePath;if(!d){throw new Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.")}return d+'/marker-'+b+(a.Browser.retina&&'icon'===b?'-2x':'')+'.png'}}),a.Icon.Default.imagePath=function(){var a,e,c,d,g=b.getElementsByTagName('script'),f=/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/;for(a=0,e=g.length;a<e;a++){if(c=g[a].src||'',c.match(f)){return d=c.split(f)[0],(d?d+'/':'')+'images'}}}(),a.Marker=a.Layer.extend({options:{icon:new a.Icon.Default(),interactive:!0,draggable:!1,keyboard:!0,title:'',alt:'',zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:'markerPane',nonBubblingEvents:['click','dblclick','mouseover','mouseout','contextmenu']},initialize:function(c,b){a.setOptions(this,b),this._latlng=a.latLng(c)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._initIcon(),this.update()},onRemove:function(){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),this._removeIcon(),this._removeShadow()},getEvents:function(){var a={zoom:this.update,viewreset:this.update};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},getLatLng:function(){return this._latlng},setLatLng:function(c){var b=this._latlng;return this._latlng=a.latLng(c),this.update(),this.fire('move',{oldLatLng:b,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var b=this.options,e='leaflet-zoom-'+(this._zoomAnimated?'animated':'hide'),c=b.icon.createIcon(this._icon),f=!1;c!==this._icon&&(this._icon&&this._removeIcon(),f=!0,b.title&&(c.title=b.title),b.alt&&(c.alt=b.alt)),a.DomUtil.addClass(c,e),b.keyboard&&(c.tabIndex='0'),this._icon=c,b.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var d=b.icon.createShadow(this._shadow),g=!1;d!==this._shadow&&(this._removeShadow(),g=!0),d&&a.DomUtil.addClass(d,e),this._shadow=d,b.opacity<1&&this._updateOpacity(),f&&this.getPane().appendChild(this._icon),this._initInteraction(),d&&g&&this.getPane('shadowPane').appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),a.DomUtil.remove(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&a.DomUtil.remove(this._shadow),this._shadow=null},_setPos:function(b){a.DomUtil.setPosition(this._icon,b),this._shadow&&a.DomUtil.setPosition(this._shadow,b),this._zIndex=b.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon.style.zIndex=this._zIndex+a},_animateZoom:function(a){var b=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(b)},_initInteraction:function(){if(this.options.interactive&&(a.DomUtil.addClass(this._icon,'leaflet-interactive'),this.addInteractiveTarget(this._icon),a.Handler.MarkerDrag)){var b=this.options.draggable;this.dragging&&(b=this.dragging.enabled(),this.dragging.disable()),this.dragging=new a.Handler.MarkerDrag(this),b&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var b=this.options.opacity;a.DomUtil.setOpacity(this._icon,b),this._shadow&&a.DomUtil.setOpacity(this._shadow,b)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}}),a.marker=function(c,b){return new a.Marker(c,b)},a.DivIcon=a.Icon.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:'leaflet-div-icon'},createIcon:function(e){var c=e&&'DIV'===e.tagName?e:b.createElement('div'),d=this.options;if(c.innerHTML=d.html!==!1?d.html:'',d.bgPos){var f=a.point(d.bgPos);c.style.backgroundPosition=-f.x+'px '+-f.y+'px'}return this._setIconStyles(c,'icon'),c},createShadow:function(){return null}}),a.divIcon=function(b){return new a.DivIcon(b)},a.Map.mergeOptions({closePopupOnClick:!0}),a.Popup=a.Layer.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,offset:[0,7],autoClose:!0,zoomAnimation:!0,className:'',pane:'popupPane'},initialize:function(c,b){a.setOptions(this,c),this._source=b},onAdd:function(b){this._zoomAnimated=this._zoomAnimated&&this.options.zoomAnimation,this._container||this._initLayout(),b._fadeAnimated&&a.DomUtil.setOpacity(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),b._fadeAnimated&&a.DomUtil.setOpacity(this._container,1),b.fire('popupopen',{popup:this}),this._source&&(this._source.fire('popupopen',{popup:this},!0),this._source.on('preclick',a.DomEvent.stopPropagation))},openOn:function(a){return a.openPopup(this),this},onRemove:function(b){b._fadeAnimated?(a.DomUtil.setOpacity(this._container,0),this._removeTimeout=setTimeout(a.bind(a.DomUtil.remove,a.DomUtil,this._container),200)):a.DomUtil.remove(this._container),b.fire('popupclose',{popup:this}),this._source&&(this._source.fire('popupclose',{popup:this},!0),this._source.off('preclick',a.DomEvent.stopPropagation))},getLatLng:function(){return this._latlng},setLatLng:function(b){return this._latlng=a.latLng(b),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility='hidden',this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility='',this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),('closeOnClick' in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this._close),this.options.keepInView&&(a.moveend=this._adjustPan),a},isOpen:function(){return !!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&a.DomUtil.toFront(this._container),this},bringToBack:function(){return this._map&&a.DomUtil.toBack(this._container),this},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var b='leaflet-popup',c=this._container=a.DomUtil.create('div',b+' '+(this.options.className||'')+' leaflet-zoom-'+(this._zoomAnimated?'animated':'hide'));if(this.options.closeButton){var d=this._closeButton=a.DomUtil.create('a',b+'-close-button',c);d.href='#close',d.innerHTML='&#215;',a.DomEvent.on(d,'click',this._onCloseButtonClick,this)}var e=this._wrapper=a.DomUtil.create('div',b+'-content-wrapper',c);this._contentNode=a.DomUtil.create('div',b+'-content',e),a.DomEvent.disableClickPropagation(e).disableScrollPropagation(this._contentNode).on(e,'contextmenu',a.DomEvent.stopPropagation),this._tipContainer=a.DomUtil.create('div',b+'-tip-container',c),this._tip=a.DomUtil.create('div',b+'-tip',this._tipContainer)},_updateContent:function(){if(this._content){var a=this._contentNode,b='function'==typeof this._content?this._content(this._source||this):this._content;if('string'==typeof b){a.innerHTML=b}else {for(;a.hasChildNodes();){a.removeChild(a.firstChild)}a.appendChild(b)}this.fire('contentupdate')}},_updateLayout:function(){var d=this._contentNode,b=d.style;b.width='',b.whiteSpace='nowrap';var c=d.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),b.width=c+1+'px',b.whiteSpace='',b.height='';var g=d.offsetHeight,e=this.options.maxHeight,f='leaflet-popup-scrolled';e&&g>e?(b.height=e+'px',a.DomUtil.addClass(d,f)):a.DomUtil.removeClass(d,f),this._containerWidth=this._container.offsetWidth},_updatePosition:function(){if(this._map){var c=this._map.latLngToLayerPoint(this._latlng),b=a.point(this.options.offset);this._zoomAnimated?a.DomUtil.setPosition(this._container,c):b=b.add(c);var d=this._containerBottom=-b.y,e=this._containerLeft=-Math.round(this._containerWidth/2)+b.x;this._container.style.bottom=d+'px',this._container.style.left=e+'px'}},_animateZoom:function(b){var c=this._map._latLngToNewLayerPoint(this._latlng,b.zoom,b.center);a.DomUtil.setPosition(this._container,c)},_adjustPan:function(){if(!(!this.options.autoPan||this._map._panAnim&&this._map._panAnim._inProgress)){var i=this._map,h=this._container.offsetHeight,j=this._containerWidth,k=new a.Point(this._containerLeft,-h-this._containerBottom);this._zoomAnimated&&k._add(a.DomUtil.getPosition(this._container));var b=i.layerPointToContainerPoint(k),l=a.point(this.options.autoPanPadding),e=a.point(this.options.autoPanPaddingTopLeft||l),f=a.point(this.options.autoPanPaddingBottomRight||l),g=i.getSize(),d=0,c=0;b.x+j+f.x>g.x&&(d=b.x+j-g.x+f.x),b.x-d-e.x<0&&(d=b.x-e.x),b.y+h+f.y>g.y&&(c=b.y+h-g.y+f.y),b.y-c-e.y<0&&(c=b.y-e.y),(d||c)&&i.fire('autopanstart').panBy([d,c])}},_onCloseButtonClick:function(b){this._close(),a.DomEvent.stop(b)}}),a.popup=function(c,b){return new a.Popup(c,b)},a.Map.include({openPopup:function(b,c,d){return b instanceof a.Popup||(b=(new a.Popup(d)).setContent(b)),c&&b.setLatLng(c),this.hasLayer(b)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=b,this.addLayer(b))},closePopup:function(a){return a&&a!==this._popup||(a=this._popup,this._popup=null),a&&this.removeLayer(a),this}}),a.Layer.include({bindPopup:function(b,c){return b instanceof a.Popup?(a.setOptions(b,c),this._popup=b,b._source=this):(this._popup&&!c||(this._popup=new a.Popup(c,this)),this._popup.setContent(b)),this._popupHandlersAdded||(this.on({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this._originalPopupOffset=this._popup.options.offset,this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(b,c){if(b instanceof a.Layer||(c=b,b=this),b instanceof a.FeatureGroup){for(var d in this._layers){b=this._layers[d];break}}return c||(c=b.getCenter?b.getCenter():b.getLatLng()),this._popup&&this._map&&(this._popup.options.offset=this._popupAnchor(b),this._popup._source=b,this._popup.update(),this._map.openPopup(this._popup,c)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(a){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(a)),this},isPopupOpen:function(){return this._popup.isOpen()},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(b){var c=b.layer||b.target;if(this._popup&&this._map){return a.DomEvent.stop(b),c instanceof a.Path?void this.openPopup(b.layer||b.target,b.latlng):void (this._map.hasLayer(this._popup)&&this._popup._source===c?this.closePopup():this.openPopup(c,b.latlng))}},_popupAnchor:function(b){var c=b._getPopupAnchor?b._getPopupAnchor():[0,0],d=this._originalPopupOffset||a.Popup.prototype.options.offset;return a.point(c).add(d)},_movePopup:function(a){this._popup.setLatLng(a.latlng)}}),a.Marker.include({_getPopupAnchor:function(){return this.options.icon.options.popupAnchor||[0,0]}}),a.LayerGroup=a.Layer.extend({initialize:function(b){this._layers={};var a,c;if(b){for(a=0,c=b.length;a<c;a++){this.addLayer(b[a])}}},addLayer:function(a){var b=this.getLayerId(a);return this._layers[b]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(b){var a=b in this._layers?b:this.getLayerId(b);return this._map&&this._layers[a]&&this._map.removeLayer(this._layers[a]),delete this._layers[a],this},hasLayer:function(a){return !!a&&(a in this._layers||this.getLayerId(a) in this._layers)},clearLayers:function(){for(var a in this._layers){this.removeLayer(this._layers[a])}return this},invoke:function(c){var b,a,d=Array.prototype.slice.call(arguments,1);for(b in this._layers){a=this._layers[b],a[c]&&a[c].apply(a,d)}return this},onAdd:function(b){for(var a in this._layers){b.addLayer(this._layers[a])}},onRemove:function(b){for(var a in this._layers){b.removeLayer(this._layers[a])}},eachLayer:function(c,a){for(var b in this._layers){c.call(a,this._layers[b])}return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];for(var b in this._layers){a.push(this._layers[b])}return a},setZIndex:function(a){return this.invoke('setZIndex',a)},getLayerId:function(b){return a.stamp(b)}}),a.layerGroup=function(b){return new a.LayerGroup(b)},a.FeatureGroup=a.LayerGroup.extend({addLayer:function(b){return this.hasLayer(b)?this:(b.addEventParent(this),a.LayerGroup.prototype.addLayer.call(this,b),this.fire('layeradd',{layer:b}))},removeLayer:function(b){return this.hasLayer(b)?(b in this._layers&&(b=this._layers[b]),b.removeEventParent(this),a.LayerGroup.prototype.removeLayer.call(this,b),this.fire('layerremove',{layer:b})):this},setStyle:function(a){return this.invoke('setStyle',a)},bringToFront:function(){return this.invoke('bringToFront')},bringToBack:function(){return this.invoke('bringToBack')},getBounds:function(){var c=new a.LatLngBounds();for(var d in this._layers){var b=this._layers[d];c.extend(b.getBounds?b.getBounds():b.getLatLng())}return c}}),a.featureGroup=function(b){return new a.FeatureGroup(b)},a.Renderer=a.Layer.extend({options:{padding:0.1},initialize:function(b){a.setOptions(this,b),a.stamp(this)},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&a.DomUtil.addClass(this._container,'leaflet-zoom-animated')),this.getPane().appendChild(this._container),this._update()},onRemove:function(){a.DomUtil.remove(this._container)},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(j,b){var c=this._map.getZoomScale(b,this._zoom),h=a.DomUtil.getPosition(this._container),e=this._map.getSize().multiplyBy(0.5+this.options.padding),i=this._map.project(this._center,b),f=this._map.project(j,b),g=f.subtract(i),d=e.multiplyBy(-c).add(h).add(e).subtract(g);a.Browser.any3d?a.DomUtil.setTransform(this._container,d,c):a.DomUtil.setPosition(this._container,d)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom)},_update:function(){var d=this.options.padding,b=this._map.getSize(),c=this._map.containerPointToLayerPoint(b.multiplyBy(-d)).round();this._bounds=new a.Bounds(c,c.add(b.multiplyBy(1+2*d)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),a.Map.include({getRenderer:function(c){var b=c.options.renderer||this._getPaneRenderer(c.options.pane)||this.options.renderer||this._renderer;return b||(b=this._renderer=this.options.preferCanvas&&a.canvas()||a.svg()),this.hasLayer(b)||this.addLayer(b),b},_getPaneRenderer:function(b){if('overlayPane'===b||b===c){return !1}var d=this._paneRenderers[b];return d===c&&(d=a.SVG&&a.svg({pane:b})||a.Canvas&&a.canvas({pane:b}),this._paneRenderers[b]=d),d}}),a.Path=a.Layer.extend({options:{stroke:!0,color:'#3388ff',weight:3,opacity:1,lineCap:'round',lineJoin:'round',dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:0.2,fillRule:'evenodd',interactive:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},getEvents:function(){return {zoomend:this._project,moveend:this._update,viewreset:this._reset}},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(b){return a.setOptions(this,b),this._renderer&&this._renderer._updateStyle(this),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return (this.options.stroke?this.options.weight/2:0)+(a.Browser.touch?10:0)}}),a.LineUtil={simplify:function(a,b){if(!b||!a.length){return a.slice()}var c=b*b;return a=this._reducePoints(a,c),a=this._simplifyDP(a,c)},pointToSegmentDistance:function(c,a,b){return Math.sqrt(this._sqClosestPointOnSegment(c,a,b,!0))},closestPointOnSegment:function(c,a,b){return this._sqClosestPointOnSegment(c,a,b)},_simplifyDP:function(e,g){var b=e.length,h=typeof Uint8Array!=c+''?Uint8Array:Array,d=new h(b);d[0]=d[b-1]=1,this._simplifyDPStep(e,d,g,0,b-1);var a,f=[];for(a=0;a<b;a++){d[a]&&f.push(e[a])}return f},_simplifyDPStep:function(b,e,g,h,i){var c,a,d,f=0;for(a=h+1;a<=i-1;a++){d=this._sqClosestPointOnSegment(b[a],b[h],b[i],!0),d>f&&(c=a,f=d)}f>g&&(e[c]=1,this._simplifyDPStep(b,e,g,h,c),this._simplifyDPStep(b,e,g,c,i))},_reducePoints:function(a,f){for(var c=[a[0]],b=1,d=0,e=a.length;b<e;b++){this._sqDist(a[b],a[d])>f&&(c.push(a[b]),d=b)}return d<e-1&&c.push(a[e-1]),c},clipSegment:function(f,c,d,i,j){var h,e,g,a=i?this._lastCode:this._getBitCode(f,d),b=this._getBitCode(c,d);for(this._lastCode=b;;){if(!(a|b)){return [f,c]}if(a&b){return !1}h=a||b,e=this._getEdgeIntersection(f,c,h,d,j),g=this._getBitCode(e,d),h===a?(f=e,a=g):(c=e,b=g)}},_getEdgeIntersection:function(b,j,g,k,l){var d,c,f=j.x-b.x,h=j.y-b.y,i=k.min,e=k.max;return 8&g?(d=b.x+f*(e.y-b.y)/h,c=e.y):4&g?(d=b.x+f*(i.y-b.y)/h,c=i.y):2&g?(d=e.x,c=b.y+h*(e.x-b.x)/f):1&g&&(d=i.x,c=b.y+h*(i.x-b.x)/f),new a.Point(d,c,l)},_getBitCode:function(c,b){var a=0;return c.x<b.min.x?a|=1:c.x>b.max.x&&(a|=2),c.y<b.min.y?a|=4:c.y>b.max.y&&(a|=8),a},_sqDist:function(d,a){var b=a.x-d.x,c=a.y-d.y;return b*b+c*c},_sqClosestPointOnSegment:function(h,i,g,k){var f,e=i.x,d=i.y,b=g.x-e,c=g.y-d,j=b*b+c*c;return j>0&&(f=((h.x-e)*b+(h.y-d)*c)/j,f>1?(e=g.x,d=g.y):f>0&&(e+=b*f,d+=c*f)),b=h.x-e,c=h.y-d,k?b*b+c*c:new a.Point(e,d)}},a.Polyline=a.Path.extend({options:{smoothFactor:1,noClip:!1},initialize:function(c,b){a.setOptions(this,b),this._setLatLngs(c)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return !this._latlngs.length},closestLayerPoint:function(k){for(var e,f,h=1/0,b=null,j=a.LineUtil._sqClosestPointOnSegment,d=0,m=this._parts.length;d<m;d++){for(var g=this._parts[d],c=1,l=g.length;c<l;c++){e=g[c-1],f=g[c];var i=j(k,e,f,!0);i<h&&(h=i,b=j(k,e,f))}}return b&&(b.distance=Math.sqrt(h)),b},getCenter:function(){var a,d,h,e,f,c,i,b=this._rings[0],g=b.length;if(!g){return null}for(a=0,d=0;a<g-1;a++){d+=b[a].distanceTo(b[a+1])/2}if(0===d){return this._map.layerPointToLatLng(b[0])}for(a=0,e=0;a<g-1;a++){if(f=b[a],c=b[a+1],h=f.distanceTo(c),e+=h,e>d){return i=(e-d)/h,this._map.layerPointToLatLng([c.x-i*(c.x-f.x),c.y-i*(c.y-f.y)])}}},getBounds:function(){return this._bounds},addLatLng:function(b,c){return c=c||this._defaultShape(),b=a.latLng(b),c.push(b),this._bounds.extend(b),this.redraw()},_setLatLngs:function(b){this._bounds=new a.LatLngBounds(),this._latlngs=this._convertLatLngs(b)},_defaultShape:function(){return a.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(d){for(var c=[],e=a.Polyline._flat(d),b=0,f=d.length;b<f;b++){e?(c[b]=a.latLng(d[b]),this._bounds.extend(c[b])):c[b]=this._convertLatLngs(d[b])}return c},_project:function(){var b=new a.Bounds();this._rings=[],this._projectLatlngs(this._latlngs,this._rings,b);var c=this._clickTolerance(),d=new a.Point(c,c);this._bounds.isValid()&&b.isValid()&&(b.min._subtract(d),b.max._add(d),this._pxBounds=b)},_projectLatlngs:function(d,f,g){var b,c,h=d[0] instanceof a.LatLng,e=d.length;if(h){for(c=[],b=0;b<e;b++){c[b]=this._map.latLngToLayerPoint(d[b]),g.extend(c[b])}f.push(c)}else {for(b=0;b<e;b++){this._projectLatlngs(d[b],f,g)}}},_clipPoints:function(){var j=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(j)){if(this.options.noClip){return void (this._parts=this._rings)}var f,b,c,i,h,d,e,g=this._parts;for(f=0,c=0,i=this._rings.length;f<i;f++){for(e=this._rings[f],b=0,h=e.length;b<h-1;b++){d=a.LineUtil.clipSegment(e[b],e[b+1],j,b,!0),d&&(g[c]=g[c]||[],g[c].push(d[0]),d[1]===e[b+1]&&b!==h-2||(g[c].push(d[1]),c++))}}}},_simplifyPoints:function(){for(var c=this._parts,d=this.options.smoothFactor,b=0,e=c.length;b<e;b++){c[b]=a.LineUtil.simplify(c[b],d)}},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)}}),a.polyline=function(c,b){return new a.Polyline(c,b)},a.Polyline._flat=function(b){return !a.Util.isArray(b[0])||'object'!=typeof b[0][0]&&'undefined'!=typeof b[0][0]},a.PolyUtil={},a.PolyUtil.clipPolygon=function(d,f,n){var j,b,m,l,g,h,k,e,c,o=[1,4,2,8],i=a.LineUtil;for(b=0,k=d.length;b<k;b++){d[b]._code=i._getBitCode(d[b],f)}for(l=0;l<4;l++){for(e=o[l],j=[],b=0,k=d.length,m=k-1;b<k;m=b++){g=d[b],h=d[m],g._code&e?h._code&e||(c=i._getEdgeIntersection(h,g,e,f,n),c._code=i._getBitCode(c,f),j.push(c)):(h._code&e&&(c=i._getEdgeIntersection(h,g,e,f,n),c._code=i._getBitCode(c,f),j.push(c)),j.push(g))}d=j}return d},a.Polygon=a.Polyline.extend({options:{fill:!0},isEmpty:function(){return !this._latlngs.length||!this._latlngs[0].length},getCenter:function(){var f,h,a,b,e,c,i,g,k,d=this._rings[0],j=d.length;if(!j){return null}for(c=i=g=0,f=0,h=j-1;f<j;h=f++){a=d[f],b=d[h],e=a.y*b.x-b.y*a.x,i+=(a.x+b.x)*e,g+=(a.y+b.y)*e,c+=3*e}return k=0===c?d[0]:[i/c,g/c],this._map.layerPointToLatLng(k)},_convertLatLngs:function(d){var b=a.Polyline.prototype._convertLatLngs.call(this,d),c=b.length;return c>=2&&b[0] instanceof a.LatLng&&b[0].equals(b[c-1])&&b.pop(),b},_setLatLngs:function(b){a.Polyline.prototype._setLatLngs.call(this,b),a.Polyline._flat(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return a.Polyline._flat(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var b=this._renderer._bounds,e=this.options.weight,f=new a.Point(e,e);if(b=new a.Bounds(b.min.subtract(f),b.max.add(f)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(b)){if(this.options.noClip){return void (this._parts=this._rings)}for(var c,d=0,g=this._rings.length;d<g;d++){c=a.PolyUtil.clipPolygon(this._rings[d],b,!0),c.length&&this._parts.push(c)}}},_updatePath:function(){this._renderer._updatePoly(this,!0)}}),a.polygon=function(c,b){return new a.Polygon(c,b)},a.Rectangle=a.Polygon.extend({initialize:function(c,b){a.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(c),b)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(b){return b=a.latLngBounds(b),[b.getSouthWest(),b.getNorthWest(),b.getNorthEast(),b.getSouthEast()]}}),a.rectangle=function(c,b){return new a.Rectangle(c,b)},a.CircleMarker=a.Path.extend({options:{fill:!0,radius:10},initialize:function(c,b){a.setOptions(this,b),this._latlng=a.latLng(c),this._radius=this.options.radius},setLatLng:function(b){return this._latlng=a.latLng(b),this.redraw(),this.fire('move',{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(b){var c=b&&b.radius||this._radius;return a.Path.prototype.setStyle.call(this,b),this.setRadius(c),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var d=this._radius,e=this._radiusY||d,b=this._clickTolerance(),c=[d+b,e+b];this._pxBounds=new a.Bounds(this._point.subtract(c),this._point.add(c))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)}}),a.circleMarker=function(c,b){return new a.CircleMarker(c,b)},a.Circle=a.CircleMarker.extend({initialize:function(d,b,c){if('number'==typeof b&&(b=a.extend({},c,{radius:b})),a.setOptions(this,b),this._latlng=a.latLng(d),isNaN(this.options.radius)){throw new Error('Circle radius cannot be NaN')}this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var b=[this._radius,this._radiusY||this._radius];return new a.LatLngBounds(this._map.layerPointToLatLng(this._point.subtract(b)),this._map.layerPointToLatLng(this._point.add(b)))},setStyle:a.Path.prototype.setStyle,_project:function(){var i=this._latlng.lng,e=this._latlng.lat,b=this._map,h=b.options.crs;if(h.distance===a.CRS.Earth.distance){var c=Math.PI/180,g=this._mRadius/a.CRS.Earth.R/c,k=b.project([e+g,i]),m=b.project([e-g,i]),f=k.add(m).divideBy(2),j=b.unproject(f).lat,d=Math.acos((Math.cos(g*c)-Math.sin(e*c)*Math.sin(j*c))/(Math.cos(e*c)*Math.cos(j*c)))/c;(isNaN(d)||0===d)&&(d=g/Math.cos(Math.PI/180*e)),this._point=f.subtract(b.getPixelOrigin()),this._radius=isNaN(d)?0:Math.max(Math.round(f.x-b.project([j,i-d]).x),1),this._radiusY=Math.max(Math.round(f.y-k.y),1)}else {var l=h.unproject(h.project(this._latlng).subtract([this._mRadius,0]));this._point=b.latLngToLayerPoint(this._latlng),this._radius=this._point.x-b.latLngToLayerPoint(l).x}this._updateBounds()}}),a.circle=function(d,b,c){return new a.Circle(d,b,c)},a.SVG=a.Renderer.extend({getEvents:function(){var b=a.Renderer.prototype.getEvents.call(this);return b.zoomstart=this._onZoomStart,b},_initContainer:function(){this._container=a.SVG.create('svg'),this._container.setAttribute('pointer-events','none'),this._rootGroup=a.SVG.create('g'),this._container.appendChild(this._rootGroup)},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){a.Renderer.prototype._update.call(this);var d=this._bounds,b=d.getSize(),c=this._container;this._svgSize&&this._svgSize.equals(b)||(this._svgSize=b,c.setAttribute('width',b.x),c.setAttribute('height',b.y)),a.DomUtil.setPosition(c,d.min),c.setAttribute('viewBox',[d.min.x,d.min.y,b.x,b.y].join(' '))}},_initPath:function(b){var c=b._path=a.SVG.create('path');b.options.className&&a.DomUtil.addClass(c,b.options.className),b.options.interactive&&a.DomUtil.addClass(c,'leaflet-interactive'),this._updateStyle(b)},_addPath:function(a){this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(b){a.DomUtil.remove(b._path),b.removeInteractiveTarget(b._path)},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(c){var a=c._path,b=c.options;a&&(b.stroke?(a.setAttribute('stroke',b.color),a.setAttribute('stroke-opacity',b.opacity),a.setAttribute('stroke-width',b.weight),a.setAttribute('stroke-linecap',b.lineCap),a.setAttribute('stroke-linejoin',b.lineJoin),b.dashArray?a.setAttribute('stroke-dasharray',b.dashArray):a.removeAttribute('stroke-dasharray'),b.dashOffset?a.setAttribute('stroke-dashoffset',b.dashOffset):a.removeAttribute('stroke-dashoffset')):a.setAttribute('stroke','none'),b.fill?(a.setAttribute('fill',b.fillColor||b.color),a.setAttribute('fill-opacity',b.fillOpacity),a.setAttribute('fill-rule',b.fillRule||'evenodd')):a.setAttribute('fill','none'))},_updatePoly:function(b,c){this._setPath(b,a.SVG.pointsToPath(b._parts,c))},_updateCircle:function(b){var c=b._point,a=b._radius,e=b._radiusY||a,d='a'+a+','+e+' 0 1,0 ',f=b._empty()?'M0 0':'M'+(c.x-a)+','+c.y+d+2*a+',0 '+d+2*-a+',0 ';this._setPath(b,f)},_setPath:function(b,a){b._path.setAttribute('d',a)},_bringToFront:function(b){a.DomUtil.toFront(b._path)},_bringToBack:function(b){a.DomUtil.toBack(b._path)}}),a.extend(a.SVG,{create:function(a){return b.createElementNS('http://www.w3.org/2000/svg',a)},pointsToPath:function(i,j){var c,b,h,g,d,e,f='';for(c=0,h=i.length;c<h;c++){for(d=i[c],b=0,g=d.length;b<g;b++){e=d[b],f+=(b?'L':'M')+e.x+' '+e.y}f+=j?a.Browser.svg?'z':'x':''}return f||'M0 0'}}),a.Browser.svg=!(!b.createElementNS||!a.SVG.create('svg').createSVGRect),a.svg=function(b){return a.Browser.svg||a.Browser.vml?new a.SVG(b):null},a.Browser.vml=!a.Browser.svg&&function(){try{var c=b.createElement('div');c.innerHTML='<v:shape adj="1"/>';var a=c.firstChild;return a.style.behavior='url(#default#VML)',a&&'object'==typeof a.adj}catch(i){return !1}}(),a.SVG.include(a.Browser.vml?{_initContainer:function(){this._container=a.DomUtil.create('div','leaflet-vml-container')},_update:function(){this._map._animatingZoom||a.Renderer.prototype._update.call(this)},_initPath:function(b){var c=b._container=a.SVG.create('shape');a.DomUtil.addClass(c,'leaflet-vml-shape '+(this.options.className||'')),c.coordsize='1 1',b._path=a.SVG.create('path'),c.appendChild(b._path),this._updateStyle(b)},_addPath:function(a){var b=a._container;this._container.appendChild(b),a.options.interactive&&a.addInteractiveTarget(b)},_removePath:function(c){var b=c._container;a.DomUtil.remove(b),c.removeInteractiveTarget(b)},_updateStyle:function(d){var c=d._stroke,e=d._fill,b=d.options,f=d._container;f.stroked=!!b.stroke,f.filled=!!b.fill,b.stroke?(c||(c=d._stroke=a.SVG.create('stroke')),f.appendChild(c),c.weight=b.weight+'px',c.color=b.color,c.opacity=b.opacity,b.dashArray?c.dashStyle=a.Util.isArray(b.dashArray)?b.dashArray.join(' '):b.dashArray.replace(/( *, *)/g,' '):c.dashStyle='',c.endcap=b.lineCap.replace('butt','flat'),c.joinstyle=b.lineJoin):c&&(f.removeChild(c),d._stroke=null),b.fill?(e||(e=d._fill=a.SVG.create('fill')),f.appendChild(e),e.color=b.fillColor||b.color,e.opacity=b.fillOpacity):e&&(f.removeChild(e),d._fill=null)},_updateCircle:function(a){var b=a._point.round(),c=Math.round(a._radius),d=Math.round(a._radiusY||c);this._setPath(a,a._empty()?'M0 0':'AL '+b.x+','+b.y+' '+c+','+d+' 0,23592600')},_setPath:function(b,a){b._path.v=a},_bringToFront:function(b){a.DomUtil.toFront(b._container)},_bringToBack:function(b){a.DomUtil.toBack(b._container)}}:{}),a.Browser.vml&&(a.SVG.create=function(){try{return b.namespaces.add('lvml','urn:schemas-microsoft-com:vml'),function(a){return b.createElement('<lvml:'+a+' class="lvml">')}}catch(i){return function(a){return b.createElement('<'+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}()),a.Canvas=a.Renderer.extend({onAdd:function(){a.Renderer.prototype.onAdd.call(this),this._layers=this._layers||{},this._draw()},_initContainer:function(){var c=this._container=b.createElement('canvas');a.DomEvent.on(c,'mousemove',a.Util.throttle(this._onMouseMove,32,this),this).on(c,'click dblclick mousedown mouseup contextmenu',this._onClick,this).on(c,'mouseout',this._handleMouseOut,this),this._ctx=c.getContext('2d')},_update:function(){if(!this._map._animatingZoom||!this._bounds){this._drawnLayers={},a.Renderer.prototype._update.call(this);var d=this._bounds,b=this._container,c=d.getSize(),e=a.Browser.retina?2:1;a.DomUtil.setPosition(b,d.min),b.width=e*c.x,b.height=e*c.y,b.style.width=c.x+'px',b.style.height=c.y+'px',a.Browser.retina&&this._ctx.scale(2,2),this._ctx.translate(-d.min.x,-d.min.y)}},_initPath:function(b){this._updateDashArray(b),this._layers[a.stamp(b)]=b},_addPath:a.Util.falseFn,_removePath:function(a){a._removed=!0,this._requestRedraw(a)},_updatePath:function(a){this._redrawBounds=a._pxBounds,this._draw(!0),a._project(),a._update(),this._draw(),this._redrawBounds=null},_updateStyle:function(a){this._updateDashArray(a),this._requestRedraw(a)},_updateDashArray:function(b){if(b.options.dashArray){var a,c=b.options.dashArray.split(','),d=[];for(a=0;a<c.length;a++){d.push(Number(c[a]))}b.options._dashArray=d}},_requestRedraw:function(c){if(this._map){var b=(c.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new a.Bounds(),this._redrawBounds.extend(c._pxBounds.min.subtract([b,b])),this._redrawBounds.extend(c._pxBounds.max.add([b,b])),this._redrawRequest=this._redrawRequest||a.Util.requestAnimFrame(this._redraw,this)}},_redraw:function(){this._redrawRequest=null,this._draw(!0),this._draw(),this._redrawBounds=null},_draw:function(d){this._clear=d;var b,a=this._redrawBounds;this._ctx.save(),a&&(this._ctx.beginPath(),this._ctx.rect(a.min.x,a.min.y,a.max.x-a.min.x,a.max.y-a.min.y),this._ctx.clip());for(var c in this._layers){b=this._layers[c],(!a||b._pxBounds&&b._pxBounds.intersects(a))&&b._updatePath(),d&&b._removed&&(delete b._removed,delete this._layers[c])}this._ctx.restore()},_updatePoly:function(b,i){var c,d,h,f,e=b._parts,g=e.length,a=this._ctx;if(g){for(this._drawnLayers[b._leaflet_id]=b,a.beginPath(),a.setLineDash&&a.setLineDash(b.options&&b.options._dashArray||[]),c=0;c<g;c++){for(d=0,h=e[c].length;d<h;d++){f=e[c][d],a[d?'lineTo':'moveTo'](f.x,f.y)}i&&a.closePath()}this._fillStroke(a,b)}},_updateCircle:function(a){if(!a._empty()){var e=a._point,b=this._ctx,d=a._radius,c=(a._radiusY||d)/d;this._drawnLayers[a._leaflet_id]=a,1!==c&&(b.save(),b.scale(1,c)),b.beginPath(),b.arc(e.x,e.y/c,d,0,2*Math.PI,!1),1!==c&&b.restore(),this._fillStroke(b,a)}},_fillStroke:function(b,d){var c=this._clear,a=d.options;b.globalCompositeOperation=c?'destination-out':'source-over',a.fill&&(b.globalAlpha=c?1:a.fillOpacity,b.fillStyle=a.fillColor||a.color,b.fill(a.fillRule||'evenodd')),a.stroke&&0!==a.weight&&(b.globalAlpha=c?1:a.opacity,d._prevWeight=b.lineWidth=c?d._prevWeight+1:a.weight,b.strokeStyle=a.color,b.lineCap=a.lineCap,b.lineJoin=a.lineJoin,b.stroke())},_onClick:function(d){var b,e=this._map.mouseEventToLayerPoint(d),c=[];for(var f in this._layers){b=this._layers[f],b.options.interactive&&b._containsPoint(e)&&!this._map._draggableMoved(b)&&(a.DomEvent._fakeStop(d),c.push(b))}c.length&&this._fireEvent(c,d)},_onMouseMove:function(a){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var b=this._map.mouseEventToLayerPoint(a);this._handleMouseOut(a,b),this._handleMouseHover(a,b)}},_handleMouseOut:function(c,d){var b=this._hoveredLayer;!b||'mouseout'!==c.type&&b._containsPoint(d)||(a.DomUtil.removeClass(this._container,'leaflet-interactive'),this._fireEvent([b],c,'mouseout'),this._hoveredLayer=null)},_handleMouseHover:function(d,e){var c,b;for(c in this._drawnLayers){b=this._drawnLayers[c],b.options.interactive&&b._containsPoint(e)&&(a.DomUtil.addClass(this._container,'leaflet-interactive'),this._fireEvent([b],d,'mouseover'),this._hoveredLayer=b)}this._hoveredLayer&&this._fireEvent([this._hoveredLayer],d)},_fireEvent:function(c,a,b){this._map._fireDOMEvent(a,b||a.type,c)},_bringToFront:a.Util.falseFn,_bringToBack:a.Util.falseFn}),a.Browser.canvas=function(){return !!b.createElement('canvas').getContext}(),a.canvas=function(b){return a.Browser.canvas?new a.Canvas(b):null},a.Polyline.prototype._containsPoint=function(h,i){var d,b,f,g,e,c,j=this._clickTolerance();if(!this._pxBounds.contains(h)){return !1}for(d=0,g=this._parts.length;d<g;d++){for(c=this._parts[d],b=0,e=c.length,f=e-1;b<e;f=b++){if((i||0!==b)&&a.LineUtil.pointToSegmentDistance(h,c[f],c[b])<=j){return !0}}}return !1},a.Polygon.prototype._containsPoint=function(c){var d,b,e,g,f,h,k,i,j=!1;if(!this._pxBounds.contains(c)){return !1}for(g=0,k=this._parts.length;g<k;g++){for(d=this._parts[g],f=0,i=d.length,h=i-1;f<i;h=f++){b=d[f],e=d[h],b.y>c.y!=e.y>c.y&&c.x<(e.x-b.x)*(c.y-b.y)/(e.y-b.y)+b.x&&(j=!j)}}return j||a.Polyline.prototype._containsPoint.call(this,c,!0)},a.CircleMarker.prototype._containsPoint=function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()},a.GeoJSON=a.FeatureGroup.extend({initialize:function(b,c){a.setOptions(this,c),this._layers={},b&&this.addData(b)},addData:function(c){var f,h,d,g=a.Util.isArray(c)?c:c.features;if(g){for(f=0,h=g.length;f<h;f++){d=g[f],(d.geometries||d.geometry||d.features||d.coordinates)&&this.addData(d)}return this}var e=this.options;if(e.filter&&!e.filter(c)){return this}var b=a.GeoJSON.geometryToLayer(c,e);return b?(b.feature=a.GeoJSON.asFeature(c),b.defaultOptions=b.options,this.resetStyle(b),e.onEachFeature&&e.onEachFeature(c,b),this.addLayer(b)):this},resetStyle:function(b){return b.options=a.Util.extend({},b.defaultOptions),this._setLayerStyle(b,this.options.style),this},setStyle:function(a){return this.eachLayer(function(b){this._setLayerStyle(b,a)},this)},_setLayerStyle:function(b,a){'function'==typeof a&&(a=a(b.feature)),b.setStyle&&b.setStyle(a)}}),a.extend(a.GeoJSON,{geometryToLayer:function(g,d){var f,j,c,k,b='Feature'===g.type?g.geometry:g,e=b?b.coordinates:null,i=[],l=d&&d.pointToLayer,h=d&&d.coordsToLatLng||this.coordsToLatLng;if(!e&&!b){return null}switch(b.type){case 'Point':return f=h(e),l?l(g,f):new a.Marker(f);case 'MultiPoint':for(c=0,k=e.length;c<k;c++){f=h(e[c]),i.push(l?l(g,f):new a.Marker(f))};return new a.FeatureGroup(i);case 'LineString':case 'MultiLineString':return j=this.coordsToLatLngs(e,'LineString'===b.type?0:1,h),new a.Polyline(j,d);case 'Polygon':case 'MultiPolygon':return j=this.coordsToLatLngs(e,'Polygon'===b.type?1:2,h),new a.Polygon(j,d);case 'GeometryCollection':for(c=0,k=b.geometries.length;c<k;c++){var m=this.geometryToLayer({geometry:b.geometries[c],type:'Feature',properties:g.properties},d);m&&i.push(m)};return new a.FeatureGroup(i);default:throw new Error('Invalid GeoJSON object.');}},coordsToLatLng:function(b){return new a.LatLng(b[1],b[0],b[2])},coordsToLatLngs:function(b,c,d){for(var e,f=[],a=0,g=b.length;a<g;a++){e=c?this.coordsToLatLngs(b[a],c-1,d):(d||this.coordsToLatLng)(b[a]),f.push(e)}return f},latLngToCoords:function(a){return a.alt!==c?[a.lng,a.lat,a.alt]:[a.lng,a.lat]},latLngsToCoords:function(e,d,f){for(var b=[],c=0,g=e.length;c<g;c++){b.push(d?a.GeoJSON.latLngsToCoords(e[c],d-1,f):a.GeoJSON.latLngToCoords(e[c]))}return !d&&f&&b.push(b[0]),b},getFeature:function(c,b){return c.feature?a.extend({},c.feature,{geometry:b}):a.GeoJSON.asFeature(b)},asFeature:function(a){return 'Feature'===a.type?a:{type:'Feature',properties:{},geometry:a}}});var g={toGeoJSON:function(){return a.GeoJSON.getFeature(this,{type:'Point',coordinates:a.GeoJSON.latLngToCoords(this.getLatLng())})}};a.Marker.include(g),a.Circle.include(g),a.CircleMarker.include(g),a.Polyline.prototype.toGeoJSON=function(){var b=!a.Polyline._flat(this._latlngs),c=a.GeoJSON.latLngsToCoords(this._latlngs,b?1:0);return a.GeoJSON.getFeature(this,{type:(b?'Multi':'')+'LineString',coordinates:c})},a.Polygon.prototype.toGeoJSON=function(){var c=!a.Polyline._flat(this._latlngs),d=c&&!a.Polyline._flat(this._latlngs[0]),b=a.GeoJSON.latLngsToCoords(this._latlngs,d?2:c?1:0,!0);return c||(b=[b]),a.GeoJSON.getFeature(this,{type:(d?'Multi':'')+'Polygon',coordinates:b})},a.LayerGroup.include({toMultiPoint:function(){var b=[];return this.eachLayer(function(a){b.push(a.toGeoJSON().geometry.coordinates)}),a.GeoJSON.getFeature(this,{type:'MultiPoint',coordinates:b})},toGeoJSON:function(){var d=this.feature&&this.feature.geometry&&this.feature.geometry.type;if('MultiPoint'===d){return this.toMultiPoint()}var c='GeometryCollection'===d,b=[];return this.eachLayer(function(e){if(e.toGeoJSON){var d=e.toGeoJSON();b.push(c?d.geometry:a.GeoJSON.asFeature(d))}}),c?a.GeoJSON.getFeature(this,{geometries:b,type:'GeometryCollection'}):{type:'FeatureCollection',features:b}}}),a.geoJSON=function(c,b){return new a.GeoJSON(c,b)},a.geoJson=a.geoJSON;var f='_leaflet_events';a.DomEvent={on:function(f,b,d,h){if('object'==typeof b){for(var e in b){this._on(f,e,b[e],d)}}else {b=a.Util.splitWords(b);for(var c=0,g=b.length;c<g;c++){this._on(f,b[c],d,h)}}return this},off:function(f,b,d,h){if('object'==typeof b){for(var e in b){this._off(f,e,b[e],d)}}else {b=a.Util.splitWords(b);for(var c=0,g=b.length;c<g;c++){this._off(f,b[c],d,h)}}return this},_on:function(b,c,j,h){var g=c+a.stamp(j)+(h?'_'+a.stamp(h):'');if(b[f]&&b[f][g]){return this}var e=function(a){return j.call(h||b,a||d.event)},i=e;return a.Browser.pointer&&0===c.indexOf('touch')?this.addPointerListener(b,c,e,g):a.Browser.touch&&'dblclick'===c&&this.addDoubleTapListener?this.addDoubleTapListener(b,e,g):'addEventListener' in b?'mousewheel'===c?b.addEventListener('onwheel' in b?'wheel':'mousewheel',e,!1):'mouseenter'===c||'mouseleave'===c?(e=function(c){c=c||d.event,a.DomEvent._isExternalTarget(b,c)&&i(c)},b.addEventListener('mouseenter'===c?'mouseover':'mouseout',e,!1)):('click'===c&&a.Browser.android&&(e=function(b){return a.DomEvent._filterClick(b,i)}),b.addEventListener(c,e,!1)):'attachEvent' in b&&b.attachEvent('on'+c,e),b[f]=b[f]||{},b[f][g]=e,this},_off:function(b,c,h,g){var e=c+a.stamp(h)+(g?'_'+a.stamp(g):''),d=b[f]&&b[f][e];return d?(a.Browser.pointer&&0===c.indexOf('touch')?this.removePointerListener(b,c,e):a.Browser.touch&&'dblclick'===c&&this.removeDoubleTapListener?this.removeDoubleTapListener(b,e):'removeEventListener' in b?'mousewheel'===c?b.removeEventListener('onwheel' in b?'wheel':'mousewheel',d,!1):b.removeEventListener('mouseenter'===c?'mouseover':'mouseleave'===c?'mouseout':c,d,!1):'detachEvent' in b&&b.detachEvent('on'+c,d),b[f][e]=null,this):this},stopPropagation:function(b){return b.stopPropagation?b.stopPropagation():b.originalEvent?b.originalEvent._stopped=!0:b.cancelBubble=!0,a.DomEvent._skipped(b),this},disableScrollPropagation:function(b){return a.DomEvent.on(b,'mousewheel',a.DomEvent.stopPropagation)},disableClickPropagation:function(c){var b=a.DomEvent.stopPropagation;return a.DomEvent.on(c,a.Draggable.START.join(' '),b),a.DomEvent.on(c,{click:a.DomEvent._fakeStop,dblclick:b})},preventDefault:function(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this},stop:function(b){return a.DomEvent.preventDefault(b).stopPropagation(b)},getMousePosition:function(c,b){if(!b){return new a.Point(c.clientX,c.clientY)}var d=b.getBoundingClientRect();return new a.Point(c.clientX-d.left-b.clientLeft,c.clientY-d.top-b.clientTop)},_wheelPxFactor:a.Browser.win&&a.Browser.chrome?2:a.Browser.gecko?d.devicePixelRatio:1,getWheelDelta:function(b){return b.deltaY&&0===b.deltaMode?-b.deltaY/a.DomEvent._wheelPxFactor:b.deltaY&&1===b.deltaMode?18*-b.deltaY:b.deltaY&&2===b.deltaMode?52*-b.deltaY:b.deltaX||b.deltaZ?0:b.wheelDelta?(b.wheelDeltaY||b.wheelDelta)/2:b.detail&&Math.abs(b.detail)<32765?18*-b.detail:b.detail?b.detail/-32765*52:0},_skipEvents:{},_fakeStop:function(b){a.DomEvent._skipEvents[b.type]=!0},_skipped:function(a){var b=this._skipEvents[a.type];return this._skipEvents[a.type]=!1,b},_isExternalTarget:function(b,c){var a=c.relatedTarget;if(!a){return !0}try{for(;a&&a!==b;){a=a.parentNode}}catch(i){return !1}return a!==b},_filterClick:function(b,e){var d=b.timeStamp||b.originalEvent&&b.originalEvent.timeStamp,c=a.DomEvent._lastClick&&d-a.DomEvent._lastClick;return c&&c>100&&c<500||b.target._simulatedClick&&!b._simulated?void a.DomEvent.stop(b):(a.DomEvent._lastClick=d,void e(b))}},a.DomEvent.addListener=a.DomEvent.on,a.DomEvent.removeListener=a.DomEvent.off,a.Draggable=a.Evented.extend({options:{clickTolerance:3},statics:{START:a.Browser.touch?['touchstart','mousedown']:['mousedown'],END:{mousedown:'mouseup',touchstart:'touchend',pointerdown:'touchend',MSPointerDown:'touchend'},MOVE:{mousedown:'mousemove',touchstart:'touchmove',pointerdown:'touchmove',MSPointerDown:'touchmove'}},initialize:function(a,b,c){this._element=a,this._dragStartTarget=b||a,this._preventOutline=c},enable:function(){this._enabled||(a.DomEvent.on(this._dragStartTarget,a.Draggable.START.join(' '),this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(a.DomEvent.off(this._dragStartTarget,a.Draggable.START.join(' '),this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(c){if(!c._simulated&&(this._moved=!1,!a.DomUtil.hasClass(this._element,'leaflet-zoom-anim')&&!(a.Draggable._dragging||c.shiftKey||1!==c.which&&1!==c.button&&!c.touches)&&this._enabled&&(a.Draggable._dragging=!0,this._preventOutline&&a.DomUtil.preventOutline(this._element),a.DomUtil.disableImageDrag(),a.DomUtil.disableTextSelection(),!this._moving))){this.fire('down');var d=c.touches?c.touches[0]:c;this._startPoint=new a.Point(d.clientX,d.clientY),a.DomEvent.on(b,a.Draggable.MOVE[c.type],this._onMove,this).on(b,a.Draggable.END[c.type],this._onUp,this)}},_onMove:function(c){if(!c._simulated){if(c.touches&&c.touches.length>1){return void (this._moved=!0)}var f=c.touches&&1===c.touches.length?c.touches[0]:c,g=new a.Point(f.clientX,f.clientY),e=g.subtract(this._startPoint);(e.x||e.y)&&(Math.abs(e.x)+Math.abs(e.y)<this.options.clickTolerance||(a.DomEvent.preventDefault(c),this._moved||(this.fire('dragstart'),this._moved=!0,this._startPos=a.DomUtil.getPosition(this._element).subtract(e),a.DomUtil.addClass(b.body,'leaflet-dragging'),this._lastTarget=c.target||c.srcElement,d.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),a.DomUtil.addClass(this._lastTarget,'leaflet-drag-target')),this._newPos=this._startPos.add(e),this._moving=!0,a.Util.cancelAnimFrame(this._animRequest),this._lastEvent=c,this._animRequest=a.Util.requestAnimFrame(this._updatePosition,this,!0)))}},_updatePosition:function(){var b={originalEvent:this._lastEvent};this.fire('predrag',b),a.DomUtil.setPosition(this._element,this._newPos),this.fire('drag',b)},_onUp:function(d){if(!d._simulated){a.DomUtil.removeClass(b.body,'leaflet-dragging'),this._lastTarget&&(a.DomUtil.removeClass(this._lastTarget,'leaflet-drag-target'),this._lastTarget=null);for(var c in a.Draggable.MOVE){a.DomEvent.off(b,a.Draggable.MOVE[c],this._onMove,this).off(b,a.Draggable.END[c],this._onUp,this)}a.DomUtil.enableImageDrag(),a.DomUtil.enableTextSelection(),this._moved&&this._moving&&(a.Util.cancelAnimFrame(this._animRequest),this.fire('dragend',{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,a.Draggable._dragging=!1}}}),a.Handler=a.Class.extend({initialize:function(a){this._map=a},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabled:function(){return !!this._enabled}}),a.Map.mergeOptions({dragging:!0,inertia:!a.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:0.2,worldCopyJump:!1,maxBoundsViscosity:0}),a.Map.Drag=a.Handler.extend({addHooks:function(){if(!this._draggable){var b=this._map;this._draggable=new a.Draggable(b._mapPane,b._container),this._draggable.on({down:this._onDown,dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on('predrag',this._onPreDragLimit,this),b.options.worldCopyJump&&(this._draggable.on('predrag',this._onPreDragWrap,this),b.on('zoomend',this._onZoomEnd,this),b.whenReady(this._onZoomEnd,this))}a.DomUtil.addClass(this._map._container,'leaflet-grab leaflet-touch-drag'),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){a.DomUtil.removeClass(this._map._container,'leaflet-grab'),a.DomUtil.removeClass(this._map._container,'leaflet-touch-drag'),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDown:function(){this._map._stop()},_onDragStart:function(){var c=this._map;if(this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var b=a.latLngBounds(this._map.options.maxBounds);this._offsetLimit=a.bounds(this._map.latLngToContainerPoint(b.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(b.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else {this._offsetLimit=null}c.fire('movestart').fire('dragstart'),c.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(b){if(this._map.options.inertia){var a=this._lastTime=+new Date(),c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(a),a-this._times[0]>50&&(this._positions.shift(),this._times.shift())}this._map.fire('move',b).fire('drag',b)},_onZoomEnd:function(){var b=this._map.getSize().divideBy(2),a=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=a.subtract(b).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,b){return a-(a-b)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var a=this._draggable._newPos.subtract(this._draggable._startPos),b=this._offsetLimit;a.x<b.min.x&&(a.x=this._viscousLimit(a.x,b.min.x)),a.y<b.min.y&&(a.y=this._viscousLimit(a.y,b.min.y)),a.x>b.max.x&&(a.x=this._viscousLimit(a.x,b.max.x)),a.y>b.max.y&&(a.y=this._viscousLimit(a.y,b.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var c=this._worldWidth,b=Math.round(c/2),a=this._initialWorldOffset,d=this._draggable._newPos.x,e=(d-b+a)%c+b-a,f=(d+b+a)%c-b-a,g=Math.abs(e+a)<Math.abs(f+a)?e:f;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=g},_onDragEnd:function(n){var b=this._map,d=b.options,k=!d.inertia||this._times.length<2;if(b.fire('dragend',n),k){b.fire('moveend')}else {var m=this._lastPos.subtract(this._positions[0]),l=(this._lastTime-this._times[0])/1000,e=d.easeLinearity,g=m.multiplyBy(e/l),h=g.distanceTo([0,0]),i=Math.min(d.inertiaMaxSpeed,h),j=g.multiplyBy(i/h),f=i/(d.inertiaDeceleration*e),c=j.multiplyBy(-f/2).round();c.x||c.y?(c=b._limitOffset(c,b.options.maxBounds),a.Util.requestAnimFrame(function(){b.panBy(c,{duration:f,easeLinearity:e,noMoveStart:!0,animate:!0})})):b.fire('moveend')}}}),a.Map.addInitHook('addHandler','dragging',a.Map.Drag),a.Map.mergeOptions({doubleClickZoom:!0}),a.Map.DoubleClickZoom=a.Handler.extend({addHooks:function(){this._map.on('dblclick',this._onDoubleClick,this)},removeHooks:function(){this._map.off('dblclick',this._onDoubleClick,this)},_onDoubleClick:function(e){var a=this._map,b=a.getZoom(),c=a.options.zoomDelta,d=e.originalEvent.shiftKey?b-c:b+c;'center'===a.options.doubleClickZoom?a.setZoom(d):a.setZoomAround(e.containerPoint,d)}}),a.Map.addInitHook('addHandler','doubleClickZoom',a.Map.DoubleClickZoom),a.Map.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:50}),a.Map.ScrollWheelZoom=a.Handler.extend({addHooks:function(){a.DomEvent.on(this._map._container,'mousewheel',this._onWheelScroll,this),this._delta=0},removeHooks:function(){a.DomEvent.off(this._map._container,'mousewheel',this._onWheelScroll,this)},_onWheelScroll:function(b){var c=a.DomEvent.getWheelDelta(b),d=this._map.options.wheelDebounceTime;this._delta+=c,this._lastMousePos=this._map.mouseEventToContainerPoint(b),this._startTime||(this._startTime=+new Date());var e=Math.max(d-(+new Date()-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a.bind(this._performZoom,this),e),a.DomEvent.stop(b)},_performZoom:function(){var a=this._map,b=a.getZoom(),c=this._map.options.zoomSnap||0;a._stop();var g=this._delta/(4*this._map.options.wheelPxPerZoomLevel),e=4*Math.log(2/(1+Math.exp(-Math.abs(g))))/Math.LN2,f=c?Math.ceil(e/c)*c:e,d=a._limitZoom(b+(this._delta>0?f:-f))-b;this._delta=0,this._startTime=null,d&&('center'===a.options.scrollWheelZoom?a.setZoom(b+d):a.setZoomAround(this._lastMousePos,b+d))}}),a.Map.addInitHook('addHandler','scrollWheelZoom',a.Map.ScrollWheelZoom),a.extend(a.DomEvent,{_touchstart:a.Browser.msPointer?'MSPointerDown':a.Browser.pointer?'pointerdown':'touchstart',_touchend:a.Browser.msPointer?'MSPointerUp':a.Browser.pointer?'pointerup':'touchend',addDoubleTapListener:function(c,d,f){function n(c){var e;if(e=a.Browser.pointer?a.DomEvent._pointersCount:c.touches.length,!(e>1)){var d=Date.now(),f=d-(g||d);b=c.touches?c.touches[0]:c,k=f>0&&f<=l,g=d}}function e(){if(k&&!b.cancelBubble){if(a.Browser.pointer){var c,e,f={};for(e in b){c=b[e],f[e]=c&&c.bind?c.bind(b):c}b=f}b.type='dblclick',d(b),g=null}}var g,b,k=!1,l=250,h='_leaflet_',i=this._touchstart,j=this._touchend;return c[h+i+f]=n,c[h+j+f]=e,c[h+'dblclick'+f]=d,c.addEventListener(i,n,!1),c.addEventListener(j,e,!1),a.Browser.edge||c.addEventListener('dblclick',d,!1),this},removeDoubleTapListener:function(b,c){var d='_leaflet_',e=b[d+this._touchstart+c],g=b[d+this._touchend+c],f=b[d+'dblclick'+c];return b.removeEventListener(this._touchstart,e,!1),b.removeEventListener(this._touchend,g,!1),a.Browser.edge||b.removeEventListener('dblclick',f,!1),this}}),a.extend(a.DomEvent,{POINTER_DOWN:a.Browser.msPointer?'MSPointerDown':'pointerdown',POINTER_MOVE:a.Browser.msPointer?'MSPointerMove':'pointermove',POINTER_UP:a.Browser.msPointer?'MSPointerUp':'pointerup',POINTER_CANCEL:a.Browser.msPointer?'MSPointerCancel':'pointercancel',TAG_WHITE_LIST:['INPUT','SELECT','OPTION'],_pointers:{},_pointersCount:0,addPointerListener:function(d,a,b,c){return 'touchstart'===a?this._addPointerStart(d,b,c):'touchmove'===a?this._addPointerMove(d,b,c):'touchend'===a&&this._addPointerEnd(d,b,c),this},removePointerListener:function(a,b,d){var c=a['_leaflet_'+b+d];return 'touchstart'===b?a.removeEventListener(this.POINTER_DOWN,c,!1):'touchmove'===b?a.removeEventListener(this.POINTER_MOVE,c,!1):'touchend'===b&&(a.removeEventListener(this.POINTER_UP,c,!1),a.removeEventListener(this.POINTER_CANCEL,c,!1)),this},_addPointerStart:function(e,f,g){var d=a.bind(function(b){if('mouse'!==b.pointerType&&b.pointerType!==b.MSPOINTER_TYPE_MOUSE){if(!(this.TAG_WHITE_LIST.indexOf(b.target.tagName)<0)){return}a.DomEvent.preventDefault(b)}this._handlePointer(b,f)},this);if(e['_leaflet_touchstart'+g]=d,e.addEventListener(this.POINTER_DOWN,d,!1),!this._pointerDocListener){var c=a.bind(this._globalPointerUp,this);b.documentElement.addEventListener(this.POINTER_DOWN,a.bind(this._globalPointerDown,this),!0),b.documentElement.addEventListener(this.POINTER_MOVE,a.bind(this._globalPointerMove,this),!0),b.documentElement.addEventListener(this.POINTER_UP,c,!0),b.documentElement.addEventListener(this.POINTER_CANCEL,c,!0),this._pointerDocListener=!0}},_globalPointerDown:function(a){this._pointers[a.pointerId]=a,this._pointersCount++},_globalPointerMove:function(a){this._pointers[a.pointerId]&&(this._pointers[a.pointerId]=a)},_globalPointerUp:function(a){delete this._pointers[a.pointerId],this._pointersCount--},_handlePointer:function(a,b){a.touches=[];for(var c in this._pointers){a.touches.push(this._pointers[c])}a.changedTouches=[a],b(a)},_addPointerMove:function(c,d,e){var b=a.bind(function(a){(a.pointerType!==a.MSPOINTER_TYPE_MOUSE&&'mouse'!==a.pointerType||0!==a.buttons)&&this._handlePointer(a,d)},this);c['_leaflet_touchmove'+e]=b,c.addEventListener(this.POINTER_MOVE,b,!1)},_addPointerEnd:function(c,d,e){var b=a.bind(function(a){this._handlePointer(a,d)},this);c['_leaflet_touchend'+e]=b,c.addEventListener(this.POINTER_UP,b,!1),c.addEventListener(this.POINTER_CANCEL,b,!1)}}),a.Map.mergeOptions({touchZoom:a.Browser.touch&&!a.Browser.android23,bounceAtZoomLimits:!0}),a.Map.TouchZoom=a.Handler.extend({addHooks:function(){a.DomUtil.addClass(this._map._container,'leaflet-touch-zoom'),a.DomEvent.on(this._map._container,'touchstart',this._onTouchStart,this)},removeHooks:function(){a.DomUtil.removeClass(this._map._container,'leaflet-touch-zoom'),a.DomEvent.off(this._map._container,'touchstart',this._onTouchStart,this)},_onTouchStart:function(d){var c=this._map;if(d.touches&&2===d.touches.length&&!c._animatingZoom&&!this._zooming){var e=c.mouseEventToContainerPoint(d.touches[0]),f=c.mouseEventToContainerPoint(d.touches[1]);this._centerPoint=c.getSize()._divideBy(2),this._startLatLng=c.containerPointToLatLng(this._centerPoint),'center'!==c.options.touchZoom&&(this._pinchStartLatLng=c.containerPointToLatLng(e.add(f)._divideBy(2))),this._startDist=e.distanceTo(f),this._startZoom=c.getZoom(),this._moved=!1,this._zooming=!0,c._stop(),a.DomEvent.on(b,'touchmove',this._onTouchMove,this).on(b,'touchend',this._onTouchEnd,this),a.DomEvent.preventDefault(d)}},_onTouchMove:function(d){if(d.touches&&2===d.touches.length&&this._zooming){var b=this._map,f=b.mouseEventToContainerPoint(d.touches[0]),g=b.mouseEventToContainerPoint(d.touches[1]),c=f.distanceTo(g)/this._startDist;if(this._zoom=b.getScaleZoom(c,this._startZoom),!b.options.bounceAtZoomLimits&&(this._zoom<b.getMinZoom()&&c<1||this._zoom>b.getMaxZoom()&&c>1)&&(this._zoom=b._limitZoom(this._zoom)),'center'===b.options.touchZoom){if(this._center=this._startLatLng,1===c){return}}else {var e=f._add(g)._divideBy(2)._subtract(this._centerPoint);if(1===c&&0===e.x&&0===e.y){return}this._center=b.unproject(b.project(this._pinchStartLatLng,this._zoom).subtract(e),this._zoom)}this._moved||(b._moveStart(!0),this._moved=!0),a.Util.cancelAnimFrame(this._animRequest);var h=a.bind(b._move,b,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=a.Util.requestAnimFrame(h,this,!0),a.DomEvent.preventDefault(d)}},_onTouchEnd:function(){return this._moved&&this._zooming?(this._zooming=!1,a.Util.cancelAnimFrame(this._animRequest),a.DomEvent.off(b,'touchmove',this._onTouchMove).off(b,'touchend',this._onTouchEnd),void (this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.snapZoom):this._map._resetView(this._center,this._map._limitZoom(this._zoom)))):void (this._zooming=!1)}}),a.Map.addInitHook('addHandler','touchZoom',a.Map.TouchZoom),a.Map.mergeOptions({tap:!0,tapTolerance:15}),a.Map.Tap=a.Handler.extend({addHooks:function(){a.DomEvent.on(this._map._container,'touchstart',this._onDown,this)},removeHooks:function(){a.DomEvent.off(this._map._container,'touchstart',this._onDown,this)},_onDown:function(d){if(d.touches){if(a.DomEvent.preventDefault(d),this._fireClick=!0,d.touches.length>1){return this._fireClick=!1,void clearTimeout(this._holdTimeout)}var c=d.touches[0],e=c.target;this._startPos=this._newPos=new a.Point(c.clientX,c.clientY),e.tagName&&'a'===e.tagName.toLowerCase()&&a.DomUtil.addClass(e,'leaflet-active'),this._holdTimeout=setTimeout(a.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent('contextmenu',c))},this),1000),this._simulateEvent('mousedown',c),a.DomEvent.on(b,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(e){if(clearTimeout(this._holdTimeout),a.DomEvent.off(b,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&e&&e.changedTouches){var d=e.changedTouches[0],c=d.target;c&&c.tagName&&'a'===c.tagName.toLowerCase()&&a.DomUtil.removeClass(c,'leaflet-active'),this._simulateEvent('mouseup',d),this._isTapValid()&&this._simulateEvent('click',d)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(c){var b=c.touches[0];this._newPos=new a.Point(b.clientX,b.clientY),this._simulateEvent('mousemove',b)},_simulateEvent:function(e,a){var c=b.createEvent('MouseEvents');c._simulated=!0,a.target._simulatedClick=!0,c.initMouseEvent(e,!0,!0,d,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(c)}}),a.Browser.touch&&!a.Browser.pointer&&a.Map.addInitHook('addHandler','tap',a.Map.Tap),a.Map.mergeOptions({boxZoom:!0}),a.Map.BoxZoom=a.Handler.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane},addHooks:function(){a.DomEvent.on(this._container,'mousedown',this._onMouseDown,this)},removeHooks:function(){a.DomEvent.off(this._container,'mousedown',this._onMouseDown,this)},moved:function(){return this._moved},_resetState:function(){this._moved=!1},_onMouseDown:function(c){return !(!c.shiftKey||1!==c.which&&1!==c.button)&&(this._resetState(),a.DomUtil.disableTextSelection(),a.DomUtil.disableImageDrag(),this._startPoint=this._map.mouseEventToContainerPoint(c),void a.DomEvent.on(b,{contextmenu:a.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this))},_onMouseMove:function(d){this._moved||(this._moved=!0,this._box=a.DomUtil.create('div','leaflet-zoom-box',this._container),a.DomUtil.addClass(this._container,'leaflet-crosshair'),this._map.fire('boxzoomstart')),this._point=this._map.mouseEventToContainerPoint(d);var b=new a.Bounds(this._point,this._startPoint),c=b.getSize();a.DomUtil.setPosition(this._box,b.min),this._box.style.width=c.x+'px',this._box.style.height=c.y+'px'},_finish:function(){this._moved&&(a.DomUtil.remove(this._box),a.DomUtil.removeClass(this._container,'leaflet-crosshair')),a.DomUtil.enableTextSelection(),a.DomUtil.enableImageDrag(),a.DomEvent.off(b,{contextmenu:a.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(c){if((1===c.which||1===c.button)&&(this._finish(),this._moved)){setTimeout(a.bind(this._resetState,this),0);var b=new a.LatLngBounds(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(b).fire('boxzoomend',{boxZoomBounds:b})}},_onKeyDown:function(a){27===a.keyCode&&this._finish()}}),a.Map.addInitHook('addHandler','boxZoom',a.Map.BoxZoom),a.Map.mergeOptions({keyboard:!0,keyboardPanDelta:80}),a.Map.Keyboard=a.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanDelta(a.options.keyboardPanDelta),this._setZoomDelta(a.options.zoomDelta)},addHooks:function(){var b=this._map._container;b.tabIndex<=0&&(b.tabIndex='0'),a.DomEvent.on(b,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),a.DomEvent.off(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var a=b.body,c=b.documentElement,e=a.scrollTop||c.scrollTop,f=a.scrollLeft||c.scrollLeft;this._map._container.focus(),d.scrollTo(f,e)}},_onFocus:function(){this._focused=!0,this._map.fire('focus')},_onBlur:function(){this._focused=!1,this._map.fire('blur')},_setPanDelta:function(e){var a,b,d=this._panKeys={},c=this.keyCodes;for(a=0,b=c.left.length;a<b;a++){d[c.left[a]]=[-1*e,0]}for(a=0,b=c.right.length;a<b;a++){d[c.right[a]]=[e,0]}for(a=0,b=c.down.length;a<b;a++){d[c.down[a]]=[0,e]}for(a=0,b=c.up.length;a<b;a++){d[c.up[a]]=[0,-1*e]}},_setZoomDelta:function(e){var a,b,d=this._zoomKeys={},c=this.keyCodes;for(a=0,b=c.zoomIn.length;a<b;a++){d[c.zoomIn[a]]=e}for(a=0,b=c.zoomOut.length;a<b;a++){d[c.zoomOut[a]]=-e}},_addHooks:function(){a.DomEvent.on(b,'keydown',this._onKeyDown,this)},_removeHooks:function(){a.DomEvent.off(b,'keydown',this._onKeyDown,this)},_onKeyDown:function(c){if(!(c.altKey||c.ctrlKey||c.metaKey)){var e,d=c.keyCode,b=this._map;if(d in this._panKeys){if(b._panAnim&&b._panAnim._inProgress){return}e=this._panKeys[d],c.shiftKey&&(e=a.point(e).multiplyBy(3)),b.panBy(e),b.options.maxBounds&&b.panInsideBounds(b.options.maxBounds)}else {if(d in this._zoomKeys){b.setZoom(b.getZoom()+(c.shiftKey?3:1)*this._zoomKeys[d])}else {if(27!==d){return}b.closePopup()}}a.DomEvent.stop(c)}}}),a.Map.addInitHook('addHandler','keyboard',a.Map.Keyboard),a.Handler.MarkerDrag=a.Handler.extend({initialize:function(a){this._marker=a},addHooks:function(){var b=this._marker._icon;this._draggable||(this._draggable=new a.Draggable(b,b,!0)),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),a.DomUtil.addClass(b,'leaflet-marker-draggable')},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&a.DomUtil.removeClass(this._marker._icon,'leaflet-marker-draggable')},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire('movestart').fire('dragstart')},_onDrag:function(c){var b=this._marker,d=b._shadow,e=a.DomUtil.getPosition(b._icon),f=b._map.layerPointToLatLng(e);d&&a.DomUtil.setPosition(d,e),b._latlng=f,c.latlng=f,b.fire('move',c).fire('drag',c)},_onDragEnd:function(a){this._marker.fire('moveend').fire('dragend',a)}}),a.Control=a.Class.extend({options:{position:'topright'},initialize:function(b){a.setOptions(this,b)},getPosition:function(){return this.options.position},setPosition:function(b){var a=this._map;return a&&a.removeControl(this),this.options.position=b,a&&a.addControl(this),this},getContainer:function(){return this._container},addTo:function(d){this.remove(),this._map=d;var b=this._container=this.onAdd(d),e=this.getPosition(),c=d._controlCorners[e];return a.DomUtil.addClass(b,'leaflet-control'),e.indexOf('bottom')!==-1?c.insertBefore(b,c.firstChild):c.appendChild(b),this},remove:function(){return this._map?(a.DomUtil.remove(this._container),this.onRemove&&this.onRemove(this._map),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&a.screenX>0&&a.screenY>0&&this._map.getContainer().focus()}}),a.control=function(b){return new a.Control(b)},a.Map.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){function d(f,d){var g=b+f+' '+b+d;c[f+d]=a.DomUtil.create('div',g,e)}var c=this._controlCorners={},b='leaflet-',e=this._controlContainer=a.DomUtil.create('div',b+'control-container',this._container);d('top','left'),d('top','right'),d('bottom','left'),d('bottom','right')},_clearControlPos:function(){a.DomUtil.remove(this._controlContainer)}}),a.Control.Zoom=a.Control.extend({options:{position:'topleft',zoomInText:'+',zoomInTitle:'Zoom in',zoomOutText:'-',zoomOutTitle:'Zoom out'},onAdd:function(e){var c='leaflet-control-zoom',d=a.DomUtil.create('div',c+' leaflet-bar'),b=this.options;return this._zoomInButton=this._createButton(b.zoomInText,b.zoomInTitle,c+'-in',d,this._zoomIn),this._zoomOutButton=this._createButton(b.zoomOutText,b.zoomOutTitle,c+'-out',d,this._zoomOut),this._updateDisabled(),e.on('zoomend zoomlevelschange',this._updateDisabled,this),d},onRemove:function(a){a.off('zoomend zoomlevelschange',this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){this._disabled||this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){this._disabled||this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(g,c,d,e,f){var b=a.DomUtil.create('a',d,e);return b.innerHTML=g,b.href='#',b.title=c,a.DomEvent.on(b,'mousedown dblclick',a.DomEvent.stopPropagation).on(b,'click',a.DomEvent.stop).on(b,'click',f,this).on(b,'click',this._refocusOnMap,this),b},_updateDisabled:function(){var c=this._map,b='leaflet-disabled';a.DomUtil.removeClass(this._zoomInButton,b),a.DomUtil.removeClass(this._zoomOutButton,b),(this._disabled||c._zoom===c.getMinZoom())&&a.DomUtil.addClass(this._zoomOutButton,b),(this._disabled||c._zoom===c.getMaxZoom())&&a.DomUtil.addClass(this._zoomInButton,b)}}),a.Map.mergeOptions({zoomControl:!0}),a.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new a.Control.Zoom(),this.addControl(this.zoomControl))}),a.control.zoom=function(b){return new a.Control.Zoom(b)},a.Control.Attribution=a.Control.extend({options:{position:'bottomright',prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(b){a.setOptions(this,b),this._attributions={}},onAdd:function(b){b.attributionControl=this,this._container=a.DomUtil.create('div','leaflet-control-attribution'),a.DomEvent&&a.DomEvent.disableClickPropagation(this._container);for(var c in b._layers){b._layers[c].getAttribution&&this.addAttribution(b._layers[c].getAttribution())}return this._update(),this._container},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){if(this._map){var b=[];for(var c in this._attributions){this._attributions[c]&&b.push(c)}var a=[];this.options.prefix&&a.push(this.options.prefix),b.length&&a.push(b.join(', ')),this._container.innerHTML=a.join(' | ')}}}),a.Map.mergeOptions({attributionControl:!0}),a.Map.addInitHook(function(){this.options.attributionControl&&(new a.Control.Attribution()).addTo(this)}),a.control.attribution=function(b){return new a.Control.Attribution(b)},a.Control.Scale=a.Control.extend({options:{position:'bottomleft',maxWidth:100,metric:!0,imperial:!0},onAdd:function(e){var b='leaflet-control-scale',c=a.DomUtil.create('div',b),d=this.options;return this._addScales(d,b+'-line',c),e.on(d.updateWhenIdle?'moveend':'move',this._update,this),e.whenReady(this._update,this),c},onRemove:function(a){a.off(this.options.updateWhenIdle?'moveend':'move',this._update,this)},_addScales:function(d,b,c){d.metric&&(this._mScale=a.DomUtil.create('div',b,c)),d.imperial&&(this._iScale=a.DomUtil.create('div',b,c))},_update:function(){var a=this._map,b=a.getSize().y/2,c=a.distance(a.containerPointToLatLng([0,b]),a.containerPointToLatLng([this.options.maxWidth,b]));this._updateScales(c)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(b){var a=this._getRoundNum(b),c=a<1000?a+' m':a/1000+' km';this._updateScale(this._mScale,c,a/b)},_updateImperial:function(e){var b,c,d,a=3.2808399*e;a>5280?(b=a/5280,c=this._getRoundNum(b),this._updateScale(this._iScale,c+' mi',c/b)):(d=this._getRoundNum(a),this._updateScale(this._iScale,d+' ft',d/a))},_updateScale:function(a,b,c){a.style.width=Math.round(this.options.maxWidth*c)+'px',a.innerHTML=b},_getRoundNum:function(c){var b=Math.pow(10,(Math.floor(c)+'').length-1),a=c/b;return a=a>=10?10:a>=5?5:a>=3?3:a>=2?2:1,b*a}}),a.control.scale=function(b){return new a.Control.Scale(b)},a.Control.Layers=a.Control.extend({options:{collapsed:!0,position:'topright',autoZIndex:!0,hideSingleBase:!1},initialize:function(d,c,e){a.setOptions(this,e),this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var b in d){this._addLayer(d[b],b)}for(b in c){this._addLayer(c[b],b,!0)}},onAdd:function(a){return this._initLayout(),this._update(),this._map=a,a.on('zoomend',this._checkDisabledLayers,this),this._container},onRemove:function(){this._map.off('zoomend',this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++){this._layers[a].layer.off('add remove',this._onLayerChange,this)}},addBaseLayer:function(b,a){return this._addLayer(b,a),this._map?this._update():this},addOverlay:function(b,a){return this._addLayer(b,a,!0),this._map?this._update():this},removeLayer:function(c){c.off('add remove',this._onLayerChange,this);var b=this._getLayer(a.stamp(c));return b&&this._layers.splice(this._layers.indexOf(b),1),this._map?this._update():this},expand:function(){a.DomUtil.addClass(this._container,'leaflet-control-layers-expanded'),this._form.style.height=null;var b=this._map.getSize().y-(this._container.offsetTop+50);return b<this._form.clientHeight?(a.DomUtil.addClass(this._form,'leaflet-control-layers-scrollbar'),this._form.style.height=b+'px'):a.DomUtil.removeClass(this._form,'leaflet-control-layers-scrollbar'),this._checkDisabledLayers(),this},collapse:function(){return a.DomUtil.removeClass(this._container,'leaflet-control-layers-expanded'),this},_initLayout:function(){var c='leaflet-control-layers',b=this._container=a.DomUtil.create('div',c);b.setAttribute('aria-haspopup',!0),a.DomEvent.disableClickPropagation(b),a.Browser.touch||a.DomEvent.disableScrollPropagation(b);var d=this._form=a.DomUtil.create('form',c+'-list');if(this.options.collapsed){a.Browser.android||a.DomEvent.on(b,{mouseenter:this.expand,mouseleave:this.collapse},this);var e=this._layersLink=a.DomUtil.create('a',c+'-toggle',b);e.href='#',e.title='Layers',a.Browser.touch?a.DomEvent.on(e,'click',a.DomEvent.stop).on(e,'click',this.expand,this):a.DomEvent.on(e,'focus',this.expand,this),a.DomEvent.on(d,'click',function(){setTimeout(a.bind(this._onInputClick,this),0)},this),this._map.on('click',this.collapse,this)}else {this.expand()}this._baseLayersList=a.DomUtil.create('div',c+'-base',d),this._separator=a.DomUtil.create('div',c+'-separator',d),this._overlaysList=a.DomUtil.create('div',c+'-overlays',d),b.appendChild(d)},_getLayer:function(c){for(var b=0;b<this._layers.length;b++){if(this._layers[b]&&a.stamp(this._layers[b].layer)===c){return this._layers[b]}}},_addLayer:function(a,b,c){a.on('add remove',this._onLayerChange,this),this._layers.push({layer:a,name:b,overlay:c}),this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex))},_update:function(){if(!this._container){return this}a.DomUtil.empty(this._baseLayersList),a.DomUtil.empty(this._overlaysList);var b,e,d,c,f=0;for(d=0;d<this._layers.length;d++){c=this._layers[d],this._addItem(c),e=e||c.overlay,b=b||!c.overlay,f+=c.overlay?0:1}return this.options.hideSingleBase&&(b=b&&f>1,this._baseLayersList.style.display=b?'':'none'),this._separator.style.display=e&&b?'':'none',this},_onLayerChange:function(b){this._handlingClick||this._update();var c=this._getLayer(a.stamp(b.target)),d=c.overlay?'add'===b.type?'overlayadd':'overlayremove':'add'===b.type?'baselayerchange':null;d&&this._map.fire(d,c)},_createRadioElement:function(e,c){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"'+(c?' checked="checked"':'')+'/>',a=b.createElement('div');return a.innerHTML=d,a.firstChild},_addItem:function(d){var c,f=b.createElement('label'),h=this._map.hasLayer(d.layer);d.overlay?(c=b.createElement('input'),c.type='checkbox',c.className='leaflet-control-layers-selector',c.defaultChecked=h):c=this._createRadioElement('leaflet-base-layers',h),c.layerId=a.stamp(d.layer),a.DomEvent.on(c,'click',this._onInputClick,this);var g=b.createElement('span');g.innerHTML=' '+d.name;var e=b.createElement('div');f.appendChild(e),e.appendChild(c),e.appendChild(g);var i=d.overlay?this._overlaysList:this._baseLayersList;return i.appendChild(f),this._checkDisabledLayers(),f},_onInputClick:function(){var c,b,d,g=this._form.getElementsByTagName('input'),e=[],f=[];this._handlingClick=!0;for(var a=g.length-1;a>=0;a--){c=g[a],b=this._getLayer(c.layerId).layer,d=this._map.hasLayer(b),c.checked&&!d?e.push(b):!c.checked&&d&&f.push(b)}for(a=0;a<f.length;a++){this._map.removeLayer(f[a])}for(a=0;a<e.length;a++){this._map.addLayer(e[a])}this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var d,a,e=this._form.getElementsByTagName('input'),f=this._map.getZoom(),b=e.length-1;b>=0;b--){d=e[b],a=this._getLayer(d.layerId).layer,d.disabled=a.options.minZoom!==c&&f<a.options.minZoom||a.options.maxZoom!==c&&f>a.options.maxZoom}},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),a.control.layers=function(d,b,c){return new a.Control.Layers(d,b,c)},a.PosAnimation=a.Evented.extend({run:function(b,c,d,e){this.stop(),this._el=b,this._inProgress=!0,this._duration=d||0.25,this._easeOutPower=1/Math.max(e||0.5,0.2),this._startPos=a.DomUtil.getPosition(b),this._offset=c.subtract(this._startPos),this._startTime=+new Date(),this.fire('start'),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=a.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(c){var a=+new Date()-this._startTime,b=1000*this._duration;a<b?this._runFrame(this._easeOut(a/b),c):(this._runFrame(1),this._complete())},_runFrame:function(d,c){var b=this._startPos.add(this._offset.multiplyBy(d));c&&b._round(),a.DomUtil.setPosition(this._el,b),this.fire('step')},_complete:function(){a.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire('end')},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),a.Map.include({setView:function(e,d,b){if(d=d===c?this._zoom:this._limitZoom(d),e=this._limitCenter(a.latLng(e),d,this.options.maxBounds),b=b||{},this._stop(),this._loaded&&!b.reset&&b!==!0){b.animate!==c&&(b.zoom=a.extend({animate:b.animate},b.zoom),b.pan=a.extend({animate:b.animate,duration:b.duration},b.pan));var f=this._zoom!==d?this._tryAnimatedZoom&&this._tryAnimatedZoom(e,d,b.zoom):this._tryAnimatedPan(e,b.pan);if(f){return clearTimeout(this._sizeTimer),this}}return this._resetView(e,d),this},panBy:function(b,c){if(b=a.point(b).round(),c=c||{},!b.x&&!b.y){return this.fire('moveend')}if(c.animate!==!0&&!this.getSize().contains(b)){return this._resetView(this.unproject(this.project(this.getCenter()).add(b)),this.getZoom()),this}if(this._panAnim||(this._panAnim=new a.PosAnimation(),this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),c.noMoveStart||this.fire('movestart'),c.animate!==!1){a.DomUtil.addClass(this._mapPane,'leaflet-pan-anim');var d=this._getMapPanePos().subtract(b).round();this._panAnim.run(this._mapPane,d,c.duration||0.25,c.easeLinearity)}else {this._rawPanBy(b),this.fire('move').fire('moveend')}return this},_onPanTransitionStep:function(){this.fire('move')},_onPanTransitionEnd:function(){a.DomUtil.removeClass(this._mapPane,'leaflet-pan-anim'),this.fire('moveend')},_tryAnimatedPan:function(c,a){var b=this._getCenterOffset(c)._floor();return !((a&&a.animate)!==!0&&!this.getSize().contains(b))&&(this.panBy(b,a),!0)}}),a.Map.mergeOptions({zoomAnimation:!0,zoomAnimationThreshold:4});var h=a.DomUtil.TRANSITION&&a.Browser.any3d&&!a.Browser.mobileOpera;h&&a.Map.addInitHook(function(){this._zoomAnimated=this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),a.DomEvent.on(this._proxy,a.DomUtil.TRANSITION_END,this._catchTransitionEnd,this))}),a.Map.include(h?{_createAnimProxy:function(){var b=this._proxy=a.DomUtil.create('div','leaflet-proxy leaflet-zoom-animated');this._panes.mapPane.appendChild(b),this.on('zoomanim',function(c){var d=a.DomUtil.TRANSFORM,e=b.style[d];a.DomUtil.setTransform(b,this.project(c.center,c.zoom),this.getZoomScale(c.zoom,1)),e===b.style[d]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on('load moveend',function(){var d=this.getCenter(),c=this.getZoom();a.DomUtil.setTransform(b,this.project(d,c),this.getZoomScale(c,1))},this)},_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf('transform')>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return !this._container.getElementsByClassName('leaflet-zoom-animated').length},_tryAnimatedZoom:function(d,c,b){if(this._animatingZoom){return !0}if(b=b||{},!this._zoomAnimated||b.animate===!1||this._nothingToAnimate()||Math.abs(c-this._zoom)>this.options.zoomAnimationThreshold){return !1}var e=this.getZoomScale(c),f=this._getCenterOffset(d)._divideBy(1-1/e);return !(b.animate!==!0&&!this.getSize().contains(f))&&(a.Util.requestAnimFrame(function(){this._moveStart(!0)._animateZoom(d,c,!0)},this),!0)},_animateZoom:function(c,b,d,e){d&&(this._animatingZoom=!0,this._animateToCenter=c,this._animateToZoom=b,a.DomUtil.addClass(this._mapPane,'leaflet-zoom-anim')),this.fire('zoomanim',{center:c,zoom:b,noUpdate:e}),setTimeout(a.bind(this._onZoomTransitionEnd,this),250)},_onZoomTransitionEnd:function(){this._animatingZoom&&(a.DomUtil.removeClass(this._mapPane,'leaflet-zoom-anim'),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),a.Util.requestAnimFrame(function(){this._moveEnd(!0)},this))}}:{}),a.Map.include({flyTo:function(l,d,i){function e(d){var f=d?-1:1,g=d?q:b,h=q*q-b*b+f*m*m*o*o,i=2*g*m*o,a=h/i,c=Math.sqrt(a*a+1)-a,e=c<1.0E-9?-18:Math.log(c);return e}function g(a){return (Math.exp(a)-Math.exp(-a))/2}function f(a){return (Math.exp(a)+Math.exp(-a))/2}function h(a){return g(a)/f(a)}function l(a){return b*(f(j)/f(j+k*a))}function u(a){return b*(f(j)*h(j+k*a)-g(j))/m}function c(a){return 1-Math.pow(1-a,1.5)}function d(){var c=(Date.now()-v)/u,e=c(c)*t;c<=1?(this._flyToFrame=a.Util.requestAnimFrame(d,this),this._move(this.unproject(p.add(r.subtract(p).multiplyBy(u(e)/o)),n),this.getScaleZoom(b/l(e),n),{flyTo:!0})):this._move(l,d)._moveEnd(!0)}if(i=i||{},i.animate===!1||!a.Browser.any3d){return this.setView(l,d,i)}this._stop();var p=this.project(this.getCenter()),r=this.project(l),s=this.getSize(),n=this._zoom;l=a.latLng(l),d=d===c?n:d;var b=Math.max(s.x,s.y),q=b*this.getZoomScale(n,d),o=r.distanceTo(p)||1,k=1.42,m=k*k,j=e(0),v=Date.now(),t=(e(1)-j)/k,u=i.duration?1000*i.duration:1000*t*0.8;return this._moveStart(!0),d.call(this),this},flyToBounds:function(c,a){var b=this._getBoundsCenterZoom(c,a);return this.flyTo(b.center,b.zoom,a)}}),a.Map.include({_defaultLocateOptions:{timeout:10000,watch:!1},locate:function(b){if(b=this._locateOptions=a.extend({},this._defaultLocateOptions,b),!('geolocation' in navigator)){return this._handleGeolocationError({code:0,message:'Geolocation not supported.'}),this}var c=a.bind(this._handleGeolocationResponse,this),d=a.bind(this._handleGeolocationError,this);return b.watch?this._locationWatchId=navigator.geolocation.watchPosition(c,d,b):navigator.geolocation.getCurrentPosition(c,d,b),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(b){var a=b.code,c=b.message||(1===a?'permission denied':2===a?'position unavailable':'timeout');this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire('locationerror',{code:a,message:'Geolocation error: '+c+'.'})},_handleGeolocationResponse:function(b){var i=b.coords.latitude,j=b.coords.longitude,d=new a.LatLng(i,j),h=d.toBounds(b.coords.accuracy),e=this._locateOptions;if(e.setView){var f=this.getBoundsZoom(h);this.setView(d,e.maxZoom?Math.min(f,e.maxZoom):f)}var g={latlng:d,bounds:h,timestamp:b.timestamp};for(var c in b.coords){'number'==typeof b.coords[c]&&(g[c]=b.coords[c])}this.fire('locationfound',g)}})}(window,document);